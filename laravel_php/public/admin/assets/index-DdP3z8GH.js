import{D as I,B as R,O as F,P as N,C as q,i as O,I as j,L as z,M as A,R as G,K as H,a as V,E as k}from"./element-plus-Dexv8m38.js";import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-D_09Ie3h.js";import{d as K,a0 as Q,l as W,c as X,o as E,U as e,L as o,u as a,a9 as x,R as u,M as Y,a as h,K as Z,S as B,i as ee}from"./@vue-ygbFPFRc.js";import{r as b}from"./index-RwF53efZ.js";import{u as te}from"./usePaging-B2jDzebD.js";import"./@element-plus-X4lX9UBP.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";function le(r){return b.get({url:"/content.consult/lists",params:r})}function oe(r){return b.post({url:"/content.consult/status",params:r})}function ae(r){return b.post({url:"/content.consult/delete",params:r})}const ne={class:"flex justify-end mt-4"},se=K({name:"contentConsult"}),Ne=K({...se,setup(r){const n=Q({module:"",status:"",mobile:"",name:""}),{pager:m,getLists:_,resetPage:f,resetParams:D}=te({fetchFun:le,params:n}),S=p=>({0:"info",1:"success",2:"danger"})[p]||"info",g=async(p,t)=>{const i=t===1?"已联系":"无效";await V.confirm(`确定将该咨询标记为"${i}"？`,"操作确认",{type:"warning"}),await oe({id:p.id,status:t}),k.success("操作成功"),_()},T=async p=>{await V.confirm("确定删除该咨询记录？","删除确认",{type:"warning"}),await ae({id:p.id}),k.success("删除成功"),_()};return W(()=>{_()}),(p,t)=>{const i=N,w=F,d=R,y=q,c=O,U=I,v=j,s=A,L=G,M=z,P=J,$=H;return E(),X("div",null,[e(v,{class:"!border-none",shadow:"never"},{default:o(()=>[e(U,{ref:"formRef",model:a(n),inline:!0},{default:o(()=>[e(d,{label:"来源模块"},{default:o(()=>[e(w,{modelValue:a(n).module,"onUpdate:modelValue":t[0]||(t[0]=l=>a(n).module=l),placeholder:"全部",clearable:"",class:"w-[120px]"},{default:o(()=>[e(i,{label:"案例",value:1}),e(i,{label:"百科",value:2}),e(i,{label:"价格反馈",value:3})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"处理状态"},{default:o(()=>[e(w,{modelValue:a(n).status,"onUpdate:modelValue":t[1]||(t[1]=l=>a(n).status=l),placeholder:"全部",clearable:"",class:"w-[120px]"},{default:o(()=>[e(i,{label:"未处理",value:0}),e(i,{label:"已联系",value:1}),e(i,{label:"无效",value:2})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"手机号"},{default:o(()=>[e(y,{modelValue:a(n).mobile,"onUpdate:modelValue":t[2]||(t[2]=l=>a(n).mobile=l),placeholder:"请输入手机号",clearable:"",class:"w-[150px]",onKeyup:x(a(f),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(d,{label:"姓名"},{default:o(()=>[e(y,{modelValue:a(n).name,"onUpdate:modelValue":t[3]||(t[3]=l=>a(n).name=l),placeholder:"请输入姓名",clearable:"",class:"w-[120px]",onKeyup:x(a(f),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(d,null,{default:o(()=>[e(c,{type:"primary",onClick:a(f)},{default:o(()=>t[5]||(t[5]=[u("查询")])),_:1},8,["onClick"]),e(c,{onClick:a(D)},{default:o(()=>t[6]||(t[6]=[u("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(v,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[Y((E(),Z(M,{size:"large",data:a(m).lists},{default:o(()=>[e(s,{label:"ID",prop:"id",width:"80"}),e(s,{label:"来源",prop:"module_desc",width:"100"}),e(s,{label:"关联内容",prop:"content_title","min-width":"150","show-overflow-tooltip":""}),e(s,{label:"姓名",prop:"name",width:"100"}),e(s,{label:"手机号",prop:"mobile",width:"130"}),e(s,{label:"备注",prop:"remark","min-width":"150","show-overflow-tooltip":""}),e(s,{label:"归属业务员",prop:"staff_name",width:"120"},{default:o(({row:l})=>[h("span",null,B(l.staff_name||"-"),1)]),_:1}),e(s,{label:"状态",width:"100"},{default:o(({row:l})=>[e(L,{type:S(l.status)},{default:o(()=>[u(B(l.status_desc),1)]),_:2},1032,["type"])]),_:1}),e(s,{label:"创建时间",prop:"create_time","min-width":"160"}),e(s,{label:"操作",width:"180",fixed:"right"},{default:o(({row:l})=>[e(c,{type:"primary",link:"",onClick:C=>g(l,1),disabled:l.status===1},{default:o(()=>t[7]||(t[7]=[u(" 已联系 ")])),_:2},1032,["onClick","disabled"]),e(c,{type:"warning",link:"",onClick:C=>g(l,2),disabled:l.status===2},{default:o(()=>t[8]||(t[8]=[u(" 无效 ")])),_:2},1032,["onClick","disabled"]),e(c,{type:"danger",link:"",onClick:C=>T(l)},{default:o(()=>t[9]||(t[9]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,a(m).loading]]),h("div",ne,[e(P,{modelValue:a(m),"onUpdate:modelValue":t[4]||(t[4]=l=>ee(m)?m.value=l:null),onChange:a(_)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{Ne as default};
