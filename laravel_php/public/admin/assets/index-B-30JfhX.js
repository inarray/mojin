import{i as F,L as P,M as I,K,I as M}from"./element-plus-Dexv8m38.js";import{_ as U}from"./index.vue_vue_type_script_setup_true_lang-D_09Ie3h.js";import{b as j,f as z}from"./index-RwF53efZ.js";import{c as q,d as G}from"./role-CHeEam9r.js";import{u as H}from"./usePaging-B2jDzebD.js";import{_ as J}from"./auth.vue_vue_type_script_setup_true_lang-BPdgbYZI.js";import{_ as O}from"./edit.vue_vue_type_script_setup_true_lang-HiC31LB_.js";import{d as E,s as $,r as x,at as Q,c as D,o as i,U as t,K as m,P as y,L as n,a as C,M as u,R as h,u as l,i as W,n as b}from"./@vue-ygbFPFRc.js";import"./@element-plus-X4lX9UBP.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./menu-C7lQ69wm.js";import"./index-CiZ7u30k.js";const X={class:"role-lists"},Y={class:"mt-4"},Z={class:"flex justify-end mt-4"},ee=E({name:"role"}),Me=E({...ee,setup(te){const c=$(),k=$(),f=x(!1),w=x(!1),{pager:p,getLists:d}=H({fetchFun:q}),R=async()=>{var o;f.value=!0,await b(),(o=c.value)==null||o.open("add")},V=async o=>{var e,s;f.value=!0,await b(),(e=c.value)==null||e.open("edit"),(s=c.value)==null||s.setFormData(o)},B=async o=>{var e,s;w.value=!0,await b(),(e=k.value)==null||e.open(),(s=k.value)==null||s.setFormData(o)},L=async o=>{await z.confirm("确定要删除？"),await G({id:o}),d()};return d(),(o,e)=>{const s=j,_=F,r=I,N=P,S=U,T=M,v=Q("perms"),A=K;return i(),D("div",X,[t(T,{class:"!border-none",shadow:"never"},{default:n(()=>[C("div",null,[u((i(),m(_,{type:"primary",onClick:R},{icon:n(()=>[t(s,{name:"el-icon-Plus"})]),default:n(()=>[e[3]||(e[3]=h(" 新增 "))]),_:1})),[[v,["auth.role/add"]]])]),u((i(),D("div",Y,[C("div",null,[t(N,{data:l(p).lists,size:"large"},{default:n(()=>[t(r,{prop:"id",label:"ID","min-width":"100"}),t(r,{prop:"name",label:"名称","min-width":"150"}),t(r,{prop:"desc",label:"备注","min-width":"150","show-overflow-tooltip":""}),t(r,{prop:"sort",label:"排序","min-width":"100"}),t(r,{prop:"num",label:"管理员人数","min-width":"100"}),t(r,{prop:"create_time",label:"创建时间","min-width":"180"}),t(r,{label:"操作",width:"200",fixed:"right"},{default:n(({row:a})=>[u((i(),m(_,{link:"",type:"primary",onClick:g=>V(a)},{default:n(()=>e[4]||(e[4]=[h(" 编辑 ")])),_:2},1032,["onClick"])),[[v,["auth.role/edit"]]]),u((i(),m(_,{link:"",type:"primary",onClick:g=>B(a)},{default:n(()=>e[5]||(e[5]=[h(" 分配权限 ")])),_:2},1032,["onClick"])),[[v,["auth.role/edit"]]]),a.id>4?u((i(),m(_,{key:0,link:"",type:"danger",onClick:g=>L(a.id)},{default:n(()=>e[6]||(e[6]=[h(" 删除 ")])),_:2},1032,["onClick"])),[[v,["auth.role/delete"]]]):y("",!0)]),_:1})]),_:1},8,["data"])]),C("div",Z,[t(S,{modelValue:l(p),"onUpdate:modelValue":e[0]||(e[0]=a=>W(p)?p.value=a:null),onChange:l(d)},null,8,["modelValue","onChange"])])])),[[A,l(p).loading]])]),_:1}),l(f)?(i(),m(O,{key:0,ref_key:"editRef",ref:c,onSuccess:l(d),onClose:e[1]||(e[1]=a=>f.value=!1)},null,8,["onSuccess"])):y("",!0),l(w)?(i(),m(J,{key:1,ref_key:"authRef",ref:k,onSuccess:l(d),onClose:e[2]||(e[2]=a=>w.value=!1)},null,8,["onSuccess"])):y("",!0)])}}});export{Me as default};
