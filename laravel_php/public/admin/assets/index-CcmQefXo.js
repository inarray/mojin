import{N as G,D as J,B as Q,O as W,P as X,C as Y,i as Z,I as ee,L as te,M as ae,_ as oe,K as le}from"./element-plus-Y_HEZpl5.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang-D-OL19on.js";import{b as se,f as ie}from"./index-jouMZIAs.js";import{d as N,r as L,s as de,a0 as R,aq as re,c as V,o as s,U as t,K as r,P as me,L as a,u as o,T as pe,ab as ue,a9 as ce,R as m,a as D,M as v,i as _e,n as F}from"./@vue-DjVelRet.js";import{c as fe,e as ye,f as ve}from"./dict-RIFIIQCB.js";import{u as be}from"./usePaging-Dtz4iZyr.js";import{_ as ge}from"./edit.vue_vue_type_script_setup_true_lang-40zHTl9O.js";import{u as ke}from"./vue-router-DifUqGFW.js";import"./@element-plus-IF8r_1z4.js";import"./lodash-es-BHGf2eTs.js";import"./dayjs-Mv9jwnDt.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-DYbUr3Ql.js";import"./pinia-D1_qSsvX.js";import"./axios-DIsA03vz.js";import"./lodash-wrSAtCJj.js";import"./@vueuse-DbKvT5Ch.js";import"./css-color-function-DsMtFL6v.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-DXsJvHIW.js";import"./clipboard-DPX9bJ1T.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js--xG_hASo.js";import"./@highlightjs-DcY7_PRf.js";import"./index-CXFF8A_O.js";const Ce={class:"dict-type"},we={class:"mt-4"},Ve={class:"flex justify-end mt-4"},De=N({name:"dictData"}),dt=N({...De,setup(Ee){const{query:K}=ke(),b=L(!1),_=de(),i=R({type:"",type_id:Number(K.id),name:"",status:""}),C=R({dict_type:[]}),{pager:f,getLists:y,resetPage:E,resetParams:S}=be({fetchFun:fe,params:i}),w=L([]),U=n=>{w.value=n.map(({id:e})=>e)},I=async()=>{var e,p;b.value=!0,await F();const n=C.dict_type.find(u=>u.id==i.type_id);(e=_.value)==null||e.setFormData({type_value:n==null?void 0:n.type,type_id:n.id}),(p=_.value)==null||p.open("add")},q=async n=>{var e,p;b.value=!0,await F(),(e=_.value)==null||e.open("edit"),(p=_.value)==null||p.setFormData(n)},x=async n=>{await ie.confirm("确定要删除？"),await ye({id:n}),y()},h=async()=>{const n=await ve({page_type:0});C.dict_type=n.lists};return y(),h(),(n,e)=>{const p=G,u=X,$=W,g=Q,M=Y,c=Z,O=J,P=ee,T=se,d=ae,B=oe,j=te,z=ne,k=re("perms"),A=le;return s(),V("div",Ce,[t(P,{class:"!border-none",shadow:"never"},{default:a(()=>[t(p,{class:"mb-4",content:"数据管理",onBack:e[0]||(e[0]=l=>n.$router.back())}),t(O,{ref:"formRef",class:"mb-[-16px]",model:o(i),inline:""},{default:a(()=>[t(g,{class:"w-[280px]",label:"字典名称"},{default:a(()=>[t($,{modelValue:o(i).type_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o(i).type_id=l),onChange:o(y)},{default:a(()=>[(s(!0),V(pe,null,ue(o(C).dict_type,l=>(s(),r(u,{label:l.name,value:l.id,key:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),t(g,{class:"w-[280px]",label:"数据名称"},{default:a(()=>[t(M,{modelValue:o(i).name,"onUpdate:modelValue":e[2]||(e[2]=l=>o(i).name=l),clearable:"",onKeyup:ce(o(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(g,{class:"w-[280px]",label:"数据状态"},{default:a(()=>[t($,{modelValue:o(i).status,"onUpdate:modelValue":e[3]||(e[3]=l=>o(i).status=l)},{default:a(()=>[t(u,{label:"全部",value:""}),t(u,{label:"正常",value:1}),t(u,{label:"停用",value:0})]),_:1},8,["modelValue"])]),_:1}),t(g,null,{default:a(()=>[t(c,{type:"primary",onClick:o(E)},{default:a(()=>e[7]||(e[7]=[m("查询")])),_:1},8,["onClick"]),t(c,{onClick:o(S)},{default:a(()=>e[8]||(e[8]=[m("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(P,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[D("div",null,[v((s(),r(c,{type:"primary",onClick:I},{icon:a(()=>[t(T,{name:"el-icon-Plus"})]),default:a(()=>[e[9]||(e[9]=m(" 添加数据 "))]),_:1})),[[k,["setting.dict.dict_data/add"]]]),v((s(),r(c,{disabled:!o(w).length,type:"danger",onClick:e[4]||(e[4]=l=>x(o(w)))},{icon:a(()=>[t(T,{name:"el-icon-Delete"})]),default:a(()=>[e[10]||(e[10]=m(" 删除 "))]),_:1},8,["disabled"])),[[k,["setting.dict.dict_data/delete"]]])]),v((s(),V("div",we,[D("div",null,[t(j,{data:o(f).lists,size:"large",onSelectionChange:U},{default:a(()=>[t(d,{type:"selection",width:"55"}),t(d,{label:"ID",prop:"id"}),t(d,{label:"数据名称",prop:"name","min-width":"120"}),t(d,{label:"数据值",prop:"value","min-width":"120"}),t(d,{label:"状态"},{default:a(({row:l})=>[l.status==1?(s(),r(B,{key:0},{default:a(()=>e[11]||(e[11]=[m("正常")])),_:1})):(s(),r(B,{key:1,type:"danger"},{default:a(()=>e[12]||(e[12]=[m("停用")])),_:1}))]),_:1}),t(d,{label:"备注",prop:"remark","min-width":"120","show-tooltip-when-overflow":""}),t(d,{label:"排序",prop:"sort"}),t(d,{label:"操作",width:"120",fixed:"right"},{default:a(({row:l})=>[v((s(),r(c,{link:"",type:"primary",onClick:H=>q(l)},{default:a(()=>e[13]||(e[13]=[m(" 编辑 ")])),_:2},1032,["onClick"])),[[k,["setting.dict.dict_data/edit"]]]),v((s(),r(c,{link:"",type:"danger",onClick:H=>x(l.id)},{default:a(()=>e[14]||(e[14]=[m(" 删除 ")])),_:2},1032,["onClick"])),[[k,["setting.dict.dict_data/delete"]]])]),_:1})]),_:1},8,["data"])]),D("div",Ve,[t(z,{modelValue:o(f),"onUpdate:modelValue":e[5]||(e[5]=l=>_e(f)?f.value=l:null),onChange:o(y)},null,8,["modelValue","onChange"])])])),[[A,o(f).loading]])]),_:1}),o(b)?(s(),r(ge,{key:0,ref_key:"editRef",ref:_,onSuccess:o(y),onClose:e[6]||(e[6]=l=>b.value=!1)},null,8,["onSuccess"])):me("",!0)])}}});export{dt as default};
