import{D as B,a6 as H,a7 as I,B as P,O as T,P as h,C as L,Q as S,E as y}from"./element-plus-Dexv8m38.js";import{b as j}from"./report-Dk0xVeLs.js";import{P as q}from"./index-CiZ7u30k.js";import{d as K,r as w,a0 as N,K as _,o as p,L as s,U as l,u as a,c as x,T as v,ab as k}from"./@vue-ygbFPFRc.js";const J=K({__name:"follow-popup",props:{reportId:{},stageOptions:{},customerTypeOptions:{}},emits:["success","close"],setup(U,{expose:E,emit:Y}){const C=U,c=Y,m=w(),f=w(),o=N({stage:"",customer_type:"",budget:"",style_pref:"",concern:"",handoff_status:"",latest_status:"",next_plan:"",next_follow_time:"",content:"",remark:""}),D={stage:[{required:!0,message:"请选择跟进阶段",trigger:"change"}]},O=()=>{var n;(n=m.value)==null||n.open()},F=async()=>{var n;await((n=f.value)==null?void 0:n.validate());try{await j({report_id:C.reportId,...o}),y.success("跟进成功"),c("success"),i()}catch(t){y.error(t.msg||"跟进失败")}},i=()=>{var n,t;(n=f.value)==null||n.resetFields(),Object.assign(o,{stage:"",customer_type:"",budget:"",style_pref:"",concern:"",handoff_status:"",latest_status:"",next_plan:"",next_follow_time:"",content:"",remark:""}),(t=m.value)==null||t.close(),c("close")};return E({open:O}),(n,t)=>{const V=h,b=T,u=P,d=I,g=H,r=L,M=S,R=B;return p(),_(q,{ref_key:"popupRef",ref:m,title:"添加跟进",async:!0,width:"700px",onConfirm:F,onClose:i},{default:s(()=>[l(R,{ref_key:"formRef",ref:f,model:a(o),rules:D,"label-width":"100px"},{default:s(()=>[l(g,{gutter:20},{default:s(()=>[l(d,{span:12},{default:s(()=>[l(u,{label:"跟进阶段",prop:"stage"},{default:s(()=>[l(b,{modelValue:a(o).stage,"onUpdate:modelValue":t[0]||(t[0]=e=>a(o).stage=e),placeholder:"请选择阶段",class:"w-full"},{default:s(()=>[(p(!0),x(v,null,k(n.stageOptions,e=>(p(),_(V,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:s(()=>[l(u,{label:"客户类型",prop:"customer_type"},{default:s(()=>[l(b,{modelValue:a(o).customer_type,"onUpdate:modelValue":t[1]||(t[1]=e=>a(o).customer_type=e),placeholder:"请选择类型",clearable:"",class:"w-full"},{default:s(()=>[(p(!0),x(v,null,k(n.customerTypeOptions,e=>(p(),_(V,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(g,{gutter:20},{default:s(()=>[l(d,{span:12},{default:s(()=>[l(u,{label:"预算",prop:"budget"},{default:s(()=>[l(r,{modelValue:a(o).budget,"onUpdate:modelValue":t[2]||(t[2]=e=>a(o).budget=e),placeholder:"客户预算"},null,8,["modelValue"])]),_:1})]),_:1}),l(d,{span:12},{default:s(()=>[l(u,{label:"风格偏好",prop:"style_pref"},{default:s(()=>[l(r,{modelValue:a(o).style_pref,"onUpdate:modelValue":t[3]||(t[3]=e=>a(o).style_pref=e),placeholder:"风格偏好"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(u,{label:"顾虑",prop:"concern"},{default:s(()=>[l(r,{modelValue:a(o).concern,"onUpdate:modelValue":t[4]||(t[4]=e=>a(o).concern=e),placeholder:"客户顾虑"},null,8,["modelValue"])]),_:1}),l(u,{label:"对接情况",prop:"handoff_status"},{default:s(()=>[l(r,{modelValue:a(o).handoff_status,"onUpdate:modelValue":t[5]||(t[5]=e=>a(o).handoff_status=e),placeholder:"与医院/博主对接情况"},null,8,["modelValue"])]),_:1}),l(u,{label:"最新动态",prop:"latest_status"},{default:s(()=>[l(r,{modelValue:a(o).latest_status,"onUpdate:modelValue":t[6]||(t[6]=e=>a(o).latest_status=e),placeholder:"客户最新动态"},null,8,["modelValue"])]),_:1}),l(u,{label:"下次计划",prop:"next_plan"},{default:s(()=>[l(r,{modelValue:a(o).next_plan,"onUpdate:modelValue":t[7]||(t[7]=e=>a(o).next_plan=e),placeholder:"下次跟进计划"},null,8,["modelValue"])]),_:1}),l(u,{label:"下次跟进",prop:"next_follow_time"},{default:s(()=>[l(M,{modelValue:a(o).next_follow_time,"onUpdate:modelValue":t[8]||(t[8]=e=>a(o).next_follow_time=e),type:"datetime",placeholder:"选择下次跟进时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm:ss",class:"w-full"},null,8,["modelValue"])]),_:1}),l(u,{label:"跟进内容",prop:"content"},{default:s(()=>[l(r,{modelValue:a(o).content,"onUpdate:modelValue":t[9]||(t[9]=e=>a(o).content=e),type:"textarea",rows:4,placeholder:"请输入详细跟进内容"},null,8,["modelValue"])]),_:1}),l(u,{label:"备注",prop:"remark"},{default:s(()=>[l(r,{modelValue:a(o).remark,"onUpdate:modelValue":t[10]||(t[10]=e=>a(o).remark=e),type:"textarea",rows:2,placeholder:"备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512)}}});export{J as _};
