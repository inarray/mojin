import{D as le,B as oe,C as se,O as ae,P as ne,i as ie,I as pe,d as re,L as de,M as me,R as ue,g as _e,K as ce,a as fe,E as T}from"./element-plus-Dexv8m38.js";import{_ as he}from"./index.vue_vue_type_script_setup_true_lang-D_09Ie3h.js";import{A as ve}from"./@element-plus-X4lX9UBP.js";import{d as U,e as ye,f as be}from"./hospital-BeBKXzQO.js";import{u as ge}from"./usePaging-B2jDzebD.js";import{h as we}from"./perm-BTE9ex1C.js";import{_ as xe}from"./edit.vue_vue_type_script_setup_true_name_hospitalInstitutionEdit_lang-D0b3iOFx.js";import{d as R,a0 as Ve,r as h,b as ke,l as Ce,at as $,c as w,o as n,U as t,K as d,P as j,L as o,u as s,T as I,ab as L,R as m,a as _,M as v,S as x,i as Ee,n as P}from"./@vue-ygbFPFRc.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./index-RwF53efZ.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./index-CiZ7u30k.js";const Se={class:"flex justify-between mb-4"},Be={class:"flex flex-col items-center justify-center gap-2 text-center"},De={class:"text-xs leading-5"},Te={key:1},Ue={class:"flex justify-end mt-4"},$e=R({name:"hospitalInstitution"}),vt=R({...$e,setup(je){const i=Ve({short_name:"",hospital_type:"",business_level:"",is_show:""}),y=h(!1),V=h(),k=h({}),C=h({}),B=h([]),A=ke(()=>we(["hospital.hospital/status"])),{pager:c,getLists:b,resetPage:M,resetParams:N}=ge({fetchFun:U,params:i}),O=async()=>{try{const a=await U({page_no:1,page_size:1});a!=null&&a.extend&&(k.value=a.extend.type_options||{},C.value=a.extend.level_options||{},B.value=a.extend.project_options||[])}catch(a){console.error(a)}},F=a=>({A:"success",B:"primary",C:"warning",D:"info",E:"danger"})[a]||"info",z=()=>{y.value=!0,P(()=>{var a;(a=V.value)==null||a.open("add")})},K=a=>{y.value=!0,P(()=>{var l;(l=V.value)==null||l.open("edit",a.id)})},q=async a=>{await fe.confirm("确定删除该机构？","删除确认",{type:"warning"}),await ye({id:a.id}),T.success("删除成功"),b()},G=async a=>{try{await be({id:a.id,is_show:a.is_show}),T.success("操作成功")}catch{a.is_show=a.is_show===1?0:1}};return Ce(()=>{O(),b()}),(a,l)=>{const H=se,f=oe,g=ne,E=ae,u=ie,J=le,D=pe,Q=re,p=me,W=ue,X=_e,Y=de,Z=he,S=$("perms"),ee=$("copy"),te=ce;return n(),w("div",null,[t(D,{class:"!border-none",shadow:"never"},{default:o(()=>[t(J,{ref:"formRef",model:s(i),inline:!0},{default:o(()=>[t(f,{label:"机构名称"},{default:o(()=>[t(H,{modelValue:s(i).short_name,"onUpdate:modelValue":l[0]||(l[0]=e=>s(i).short_name=e),placeholder:"请输入机构简称",clearable:"",class:"w-[180px]"},null,8,["modelValue"])]),_:1}),t(f,{label:"医院类型"},{default:o(()=>[t(E,{modelValue:s(i).hospital_type,"onUpdate:modelValue":l[1]||(l[1]=e=>s(i).hospital_type=e),placeholder:"全部",clearable:"",class:"w-[120px]"},{default:o(()=>[(n(!0),w(I,null,L(s(k),(e,r)=>(n(),d(g,{key:r,label:e,value:Number(r)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"业务等级"},{default:o(()=>[t(E,{modelValue:s(i).business_level,"onUpdate:modelValue":l[2]||(l[2]=e=>s(i).business_level=e),placeholder:"全部",clearable:"",class:"w-[100px]"},{default:o(()=>[(n(!0),w(I,null,L(s(C),(e,r)=>(n(),d(g,{key:r,label:e,value:r},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"状态"},{default:o(()=>[t(E,{modelValue:s(i).is_show,"onUpdate:modelValue":l[3]||(l[3]=e=>s(i).is_show=e),placeholder:"全部",clearable:"",class:"w-[100px]"},{default:o(()=>[t(g,{label:"启用",value:1}),t(g,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1}),t(f,null,{default:o(()=>[t(u,{type:"primary",onClick:s(M)},{default:o(()=>l[6]||(l[6]=[m("查询")])),_:1},8,["onClick"]),t(u,{onClick:s(N)},{default:o(()=>l[7]||(l[7]=[m("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(D,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[_("div",Se,[v((n(),d(u,{type:"primary",onClick:z},{default:o(()=>[t(Q,{class:"mr-1"},{default:o(()=>[t(s(ve))]),_:1}),l[8]||(l[8]=m(" 添加机构 "))]),_:1})),[[S,["hospital.hospital/add"]]])]),v((n(),d(Y,{size:"large",data:s(c).lists},{default:o(()=>[t(p,{label:"ID",prop:"id",width:"70"}),t(p,{label:"机构简称",prop:"short_name","min-width":"120"}),t(p,{label:"机构全称",prop:"full_name","min-width":"180","show-overflow-tooltip":""}),t(p,{label:"接口密钥","min-width":"220"},{default:o(({row:e})=>[_("div",Be,[_("div",De,[_("div",null,"AppId："+x(e.app_id||"-"),1),_("div",null,"AppSecret："+x(e.app_secret||"-"),1)]),e.app_id&&e.app_secret?v((n(),d(u,{key:0,type:"primary",plain:"",size:"small"},{default:o(()=>l[9]||(l[9]=[m(" 复制 ")])),_:2},1024)),[[ee,`app_id=${e.app_id}
app_secret=${e.app_secret}`]]):j("",!0)])]),_:1}),t(p,{label:"地区",prop:"region","min-width":"120"}),t(p,{label:"医院类型",prop:"hospital_type_desc",width:"100"}),t(p,{label:"业务等级",prop:"business_level",width:"90",align:"center"},{default:o(({row:e})=>[t(W,{type:F(e.business_level)},{default:o(()=>[m(x(e.business_level),1)]),_:2},1032,["type"])]),_:1}),t(p,{label:"状态",width:"80"},{default:o(({row:e})=>[s(A)?(n(),d(X,{key:0,modelValue:e.is_show,"onUpdate:modelValue":r=>e.is_show=r,"active-value":1,"inactive-value":0,onChange:r=>G(e)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(n(),w("span",Te,x(e.is_show===1?"启用":"禁用"),1))]),_:1}),t(p,{label:"创建时间",prop:"create_time","min-width":"170"}),t(p,{label:"操作",width:"150",fixed:"right"},{default:o(({row:e})=>[v((n(),d(u,{type:"primary",link:"",onClick:r=>K(e)},{default:o(()=>l[10]||(l[10]=[m(" 编辑 ")])),_:2},1032,["onClick"])),[[S,["hospital.hospital/edit"]]]),v((n(),d(u,{type:"danger",link:"",onClick:r=>q(e)},{default:o(()=>l[11]||(l[11]=[m(" 删除 ")])),_:2},1032,["onClick"])),[[S,["hospital.hospital/delete"]]])]),_:1})]),_:1},8,["data"])),[[te,s(c).loading]]),_("div",Ue,[t(Z,{modelValue:s(c),"onUpdate:modelValue":l[4]||(l[4]=e=>Ee(c)?c.value=e:null),onChange:s(b)},null,8,["modelValue","onChange"])])]),_:1}),s(y)?(n(),d(xe,{key:0,ref_key:"editRef",ref:V,"type-options":s(k),"level-options":s(C),"project-options":s(B),onSuccess:s(b),onClose:l[5]||(l[5]=e=>y.value=!1)},null,8,["type-options","level-options","project-options","onSuccess"])):j("",!0)])}}});export{vt as default};
