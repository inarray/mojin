import{D as h,B,G as q,H as D,C as F}from"./element-plus-Dexv8m38.js";import{P as I}from"./index-CiZ7u30k.js";import{f as v}from"./index-RwF53efZ.js";import{d as S,s as w,a0 as U,b as j,w as y,K as G,o as P,L as a,a as H,U as r,u as l,R as p,S as V}from"./@vue-ygbFPFRc.js";import"./@element-plus-X4lX9UBP.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";const K={class:"pr-8"},ye=S({__name:"account-adjust",props:{show:{type:Boolean,required:!0},value:{type:[Number,String],required:!0}},emits:["update:show","confirm"],setup(s,{emit:k}){const n=w(),d=s,f=k,o=U({action:1,num:"",remark:""}),i=w(),c=j(()=>Number(d.value)+Number(o.num)*(o.action==1?1:-1)),R={num:[{required:!0,message:"请输入调整的金额"}]},x=e=>{if(e.includes("-"))return v.msgError("请输入正整数");o.num=e},C=async()=>{var e;await((e=n.value)==null?void 0:e.validate()),f("confirm",o)},E=()=>{var e;f("update:show",!1),(e=n.value)==null||e.resetFields()};return y(()=>d.show,e=>{var t,m;e?(t=i.value)==null||t.open():(m=i.value)==null||m.close()}),y(c,e=>{e<0&&(v.msgError("调整后余额需大于0"),o.num="")}),(e,t)=>{const m=B,_=D,g=q,b=F,N=h;return P(),G(I,{ref_key:"popupRef",ref:i,title:"余额调整",width:"500px",onConfirm:C,async:!0,onClose:E},{default:a(()=>[H("div",K,[r(N,{ref_key:"formRef",ref:n,model:l(o),"label-width":"120px",rules:R},{default:a(()=>[r(m,{label:"当前余额"},{default:a(()=>[p("¥ "+V(s.value),1)]),_:1}),r(m,{label:"余额增减",required:"",prop:"action"},{default:a(()=>[r(g,{modelValue:l(o).action,"onUpdate:modelValue":t[0]||(t[0]=u=>l(o).action=u)},{default:a(()=>[r(_,{value:1},{default:a(()=>t[2]||(t[2]=[p("增加余额")])),_:1}),r(_,{value:2},{default:a(()=>t[3]||(t[3]=[p("扣减余额")])),_:1})]),_:1},8,["modelValue"])]),_:1}),r(m,{label:"调整余额",prop:"num"},{default:a(()=>[r(b,{"model-value":l(o).num,placeholder:"请输入调整的金额",type:"number",onInput:x},null,8,["model-value"])]),_:1}),r(m,{label:"调整后余额"},{default:a(()=>[p(" ¥ "+V(l(c)),1)]),_:1}),r(m,{label:"备注",prop:"remark"},{default:a(()=>[r(b,{modelValue:l(o).remark,"onUpdate:modelValue":t[1]||(t[1]=u=>l(o).remark=u),type:"textarea",rows:4},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},512)}}});export{ye as default};
