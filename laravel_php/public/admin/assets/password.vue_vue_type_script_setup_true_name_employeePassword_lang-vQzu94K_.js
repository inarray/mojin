import{P as B}from"./index-CiZ7u30k.js";import{D as k,B as D,C as F,E as I}from"./element-plus-Dexv8m38.js";import{u as N}from"./employee-CJ8eLApb.js";import{m as g}from"./index-RwF53efZ.js";import{d as y,r as p,a0 as S,K as U,o as q,L as n,a,U as l,R as x,S as j,u as t}from"./@vue-ygbFPFRc.js";const K={class:"mb-4 text-gray-500"},L={class:"text-primary font-medium"},M=y({name:"employeePassword"}),O=y({...M,emits:["success","close"],setup(T,{expose:v,emit:b}){const u=b,m=p(),i=p(),c=p(0),f=p(""),s=S({password:"",password_confirm:""}),V={password:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:32,message:"密码长度6-32个字符",trigger:"blur"}],password_confirm:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(o,e,r)=>{e!==s.password?r(new Error("两次密码输入不一致")):r()},trigger:"blur"}]},E=()=>{s.password="",s.password_confirm=""},h=(o,e)=>{var r;c.value=o,f.value=e,E(),(r=m.value)==null||r.open()},C=async()=>{var o;try{await((o=i.value)==null?void 0:o.validate()),await N({id:c.value,password:g(s.password),password_confirm:g(s.password_confirm)}),I.success("密码修改成功"),u("success"),w()}catch(e){return Promise.reject(e)}},w=()=>{var o;(o=m.value)==null||o.close(),u("close")};return v({open:h}),(o,e)=>{const r=F,_=D,R=k,P=B;return q(),U(P,{ref_key:"popupRef",ref:m,title:"修改密码",async:!0,width:"450px",onConfirm:C,onClose:w},{default:n(()=>[a("div",K,[e[2]||(e[2]=x(" 正在为账号 ")),a("span",L,j(t(f)),1),e[3]||(e[3]=x(" 修改密码 "))]),l(R,{ref_key:"formRef",ref:i,model:t(s),rules:V,"label-width":"100px","label-position":"right"},{default:n(()=>[l(_,{label:"新密码",prop:"password"},{default:n(()=>[l(r,{modelValue:t(s).password,"onUpdate:modelValue":e[0]||(e[0]=d=>t(s).password=d),type:"password",placeholder:"请输入新密码",maxlength:"32","show-password":""},null,8,["modelValue"])]),_:1}),l(_,{label:"确认密码",prop:"password_confirm"},{default:n(()=>[l(r,{modelValue:t(s).password_confirm,"onUpdate:modelValue":e[1]||(e[1]=d=>t(s).password_confirm=d),type:"password",placeholder:"请再次输入新密码",maxlength:"32","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),e[4]||(e[4]=a("div",{class:"text-xs text-gray-400 mt-2"},[a("p",null,"• 密码长度6-32个字符"),a("p",null,"• 建议使用字母、数字、符号组合")],-1))]),_:1},512)}}});export{O as _};
