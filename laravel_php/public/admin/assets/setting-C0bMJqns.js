import{_ as y}from"./index-DWSAN92z.js";import{d as f,g as k,f as I,h as _,a as x,k as r,w as a,o as B,e as s,b as p,m as C,E as S,v as M,I as l,ff as N}from"./index-CAdEGE5y.js";import{E as q}from"./el-card-BIBczm-x.js";import{E as F,a as R}from"./el-form-item-C9m7NFov.js";import{_ as D}from"./picker-BI5fuaZA.js";import"./_baseClone-BJpBIEiG.js";import"./_Uint8Array-m-IgZgaP.js";import"./_initCloneObject-DAVpBKRx.js";import"./index-CKG7kpOs.js";import"./index-DyY_X5TA.js";import"./index-C8YO2mGo.js";import"./index.vue_vue_type_script_setup_true_lang-RZKO0nss.js";import"./el-tag-C6jY50eF.js";import"./isEqual-Uz2oXqxO.js";import"./el-select-BSU4bs56.js";import"./index-BWSaVtQa.js";import"./token-DI9FKtlJ.js";import"./el-table-column-CYpMIt-1.js";import"./el-checkbox-DTAY9hFN.js";import"./index-DgL6gzmL.js";import"./index-D7VyY_1j.js";import"./el-tree-h27WeJsk.js";import"./index.vue_vue_type_script_setup_true_lang-CWZC40pw.js";import"./el-popover-BOKUFvHK.js";import"./usePaging-CxdSvsp1.js";const T={class:"user-setting"},j={class:"w-80"},z={class:"w-80"},A={class:"w-80"},G={class:"w-80"},H={class:"w-80"},J=f({name:"userSetting"}),go=f({...J,setup(K){const i=k(),u=I(),o=_({avatar:"",account:"",name:"",password_old:"",password:"",password_confirm:""}),c=_({avatar:[{required:!0,message:"头像不能为空",trigger:["change"]}],name:[{required:!0,message:"请输入名称",trigger:["blur"]}]}),w=async()=>{const d=u.userInfo;for(const e in o)o[e]=d[e]},g=async()=>{if(o.password_old||o.password||o.password_confirm){if(!o.password_old)return l.msgError("请输入当前密码");if(!o.password)return l.msgError("请输入新的密码");if(!o.password_confirm)return l.msgError("请输入确定密码");if(o.password_confirm!=o.password)return l.msgError("两次输入的密码不一样")}if(o.password_old&&o.password&&o.password_confirm){if(o.password_old.length<6||o.password_old.length>32)return l.msgError("密码长度在6到32之间");if(o.password.length<6||o.password.length>32)return l.msgError("密码长度在6到32之间");if(o.password_confirm.length<6||o.password_confirm.length>32)return l.msgError("密码长度在6到32之间")}await N(o),u.getUserInfo()},V=async()=>{var d;await((d=i.value)==null?void 0:d.validate()),g()};return w(),(d,e)=>{const v=D,n=F,m=S,E=R,b=q,h=M,U=y;return B(),x("div",T,[r(b,{class:"!border-none",shadow:"never"},{default:a(()=>[r(E,{ref_key:"formRef",ref:i,class:"ls-form",model:s(o),rules:s(c),"label-width":"100px"},{default:a(()=>[r(n,{label:"头像：",prop:"avatar"},{default:a(()=>[r(v,{modelValue:s(o).avatar,"onUpdate:modelValue":e[0]||(e[0]=t=>s(o).avatar=t),limit:1},null,8,["modelValue"])]),_:1}),r(n,{label:"账号：",prop:"account"},{default:a(()=>[p("div",j,[r(m,{modelValue:s(o).account,"onUpdate:modelValue":e[1]||(e[1]=t=>s(o).account=t),disabled:""},null,8,["modelValue"])])]),_:1}),r(n,{label:"名称：",prop:"name"},{default:a(()=>[p("div",z,[r(m,{modelValue:s(o).name,"onUpdate:modelValue":e[2]||(e[2]=t=>s(o).name=t),placeholder:"请输入名称"},null,8,["modelValue"])])]),_:1}),r(n,{label:"当前密码：",prop:"password_old"},{default:a(()=>[p("div",A,[r(m,{modelValue:s(o).password_old,"onUpdate:modelValue":e[3]||(e[3]=t=>s(o).password_old=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1}),r(n,{label:"新的密码：",prop:"password"},{default:a(()=>[p("div",G,[r(m,{modelValue:s(o).password,"onUpdate:modelValue":e[4]||(e[4]=t=>s(o).password=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1}),r(n,{label:"确定密码：",prop:"password_confirm"},{default:a(()=>[p("div",H,[r(m,{modelValue:s(o).password_confirm,"onUpdate:modelValue":e[5]||(e[5]=t=>s(o).password_confirm=t),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])]),_:1}),r(U,null,{default:a(()=>[r(h,{type:"primary",onClick:V},{default:a(()=>e[6]||(e[6]=[C("保存")])),_:1})]),_:1})])}}});export{go as default};
