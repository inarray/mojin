import{D as O,B as R,O as V,P as I,E as g}from"./element-plus-Dexv8m38.js";import{a as L}from"./report-Dk0xVeLs.js";import{g as P}from"./blogger-Yc_pWcVi.js";import{P as D}from"./index-CiZ7u30k.js";import{d as S,r as c,a0 as U,K as u,o as i,L as t,U as m,u as r,c as q,T as z,ab as K}from"./@vue-ygbFPFRc.js";const G=S({__name:"assign-blogger-popup",props:{reportId:{}},emits:["success","close"],setup(f,{expose:b,emit:h}){const v=f,p=h,l=c(),n=c(),s=U({blogger_admin_id:""}),y={blogger_admin_id:[{required:!0,message:"请选择博主",trigger:"change"}]},_=c([]),w=async()=>{try{const e=await P({page_no:1,page_size:200});_.value=(e==null?void 0:e.lists)||[]}catch(e){console.error(e)}},B=()=>{var e;(e=l.value)==null||e.open(),w()},E=async()=>{var e;await((e=n.value)==null?void 0:e.validate());try{await L({report_id:v.reportId,blogger_admin_id:s.blogger_admin_id}),g.success("分配成功"),p("success"),d()}catch(o){g.error(o.msg||"分配失败")}},d=()=>{var e,o;(e=n.value)==null||e.resetFields(),s.blogger_admin_id="",(o=l.value)==null||o.close(),p("close")};return b({open:B}),(e,o)=>{const k=I,x=V,C=R,F=O;return i(),u(D,{ref_key:"popupRef",ref:l,title:"对接咨询（分配博主）",async:!0,width:"500px",onConfirm:E,onClose:d},{default:t(()=>[m(F,{ref_key:"formRef",ref:n,model:r(s),rules:y,"label-width":"100px"},{default:t(()=>[m(C,{label:"选择博主",prop:"blogger_admin_id"},{default:t(()=>[m(x,{modelValue:r(s).blogger_admin_id,"onUpdate:modelValue":o[0]||(o[0]=a=>r(s).blogger_admin_id=a),placeholder:"请选择博主",filterable:"",class:"w-full"},{default:t(()=>[(i(!0),q(z,null,K(r(_),a=>(i(),u(k,{key:a.id,label:a.name||a.account,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512)}}});export{G as _};
