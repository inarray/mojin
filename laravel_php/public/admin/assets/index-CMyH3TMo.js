import{D as Ct,Q as Vt,O as ht,P as $t,C as xt,F as Et,i as Pt,d as Rt,I as St,L as Lt,M as Dt,q as Mt,r as Ut,R as It,K as Tt,B as Nt,S as Ot,a as zt,E as q}from"./element-plus-Dexv8m38.js";import{_ as Ft}from"./index.vue_vue_type_script_setup_true_lang-D_09Ie3h.js";import{I as At,J as Bt,K as Yt}from"./@element-plus-X4lX9UBP.js";import{e as jt,a as Xt,c as qt,u as Kt}from"./consumer-B-5sexIM.js";import{d as Jt}from"./department-Csnz69ah.js";import{g as Qt}from"./employee-CJ8eLApb.js";import{u as Gt}from"./usePaging-B2jDzebD.js";import{h as Ht}from"./perm-BTE9ex1C.js";import{a as Wt,d as Zt}from"./index-RwF53efZ.js";import{_ as el}from"./report.vue_vue_type_script_setup_true_name_consumerReport_lang-nQ-CIE3k.js";import tl from"./follow-popup-B11DM2t4.js";import ll from"./follow-log-popup-Bt3e0Uw_.js";import{_ as ol}from"./assign-popup.vue_vue_type_script_setup_true_lang-DEWeLF_i.js";import{_ as sl}from"./transfer-popup.vue_vue_type_script_setup_true_lang-CSvaxHze.js";import{_ as al}from"./assist-popup.vue_vue_type_script_setup_true_lang-BeRrudPv.js";import{_ as nl}from"./assign-blogger-popup.vue_vue_type_script_setup_true_lang-BE3vf3QI.js";import{_ as rl}from"./customer-edit-popup.vue_vue_type_script_setup_true_lang-615hXTRp.js";import{d as Oe,r as u,a0 as Te,b as K,a1 as il,w as B,l as ul,n as P,$ as dl,at as Ne,c as k,o as r,U as a,K as d,P as g,L as s,a as n,u as o,i as D,T as M,ab as U,R as p,M as C,S as y,O as pe}from"./@vue-ygbFPFRc.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./index-CiZ7u30k.js";import"./project-CreSpfIK.js";import"./hospital-BeBKXzQO.js";import"./region-china-BCkRz1Fn.js";import"./picker-B75jrQ9B.js";import"./index-CbsoMyLi.js";import"./index-B6RYlZU7.js";import"./index-DABXkeGo.js";import"./index.vue_vue_type_script_setup_true_lang-Dv5KHRgf.js";import"./vuedraggable-RHgmLr3o.js";import"./vue-CQyKTslw.js";import"./sortablejs-BvvSZPRv.js";const ml={class:"advanced-search"},pl={class:"search-item"},cl={key:0,class:"search-item"},fl={key:1,class:"search-item"},_l={class:"search-item"},vl={class:"search-item"},yl={class:"search-item"},gl={class:"search-item"},bl={class:"search-item"},wl={class:"search-item"},kl={class:"search-item"},Cl={class:"search-item"},Vl={class:"advanced-footer"},hl={class:"search-item search-options"},$l={class:"search-checks"},xl={class:"search-actions"},El={class:"flex items-center mb-4"},Pl={class:"flex items-center"},Rl={class:"text-xs leading-5"},Sl={class:"font-bold text-sm"},Ll={class:"text-gray-500 flex items-center gap-1"},Dl={class:"text-gray-500 flex items-center gap-1"},Ml={class:"text-gray-500"},Ul={class:"text-gray-500"},Il={class:"text-xs leading-5"},Tl={class:"owner-cell"},Nl={key:1},Ol={key:1},zl={key:0,class:"whitespace-pre-line"},Fl={key:1},Al={class:"flex flex-wrap gap-1"},Bl={class:"flex justify-end mt-4"},Yl={class:"text-center remind-dialog-text text-gray-600"},jl=Oe({name:"consumerLists"}),Xl=Oe({...jl,setup(ql){const J=u(),ze=u();let V=null,Q=!1,ce=0,fe=0;const R=Wt(),i=Te({start_time:"",end_time:"",dept_id:"",owner_uid:"",source:"",stage:"",customer_type:"",mobile:"",wechat:"",customer_name:"",unfollow_start:"",unfollow_end:"",pending_start:"",pending_end:"",today_pending:0,today_follow:0,assist_only:0}),I=u([]),T=u([]),N=u([]),Fe=[{value:1,label:"小红书"},{value:2,label:"抖音"},{value:6,label:"快手"},{value:3,label:"微信"},{value:7,label:"发帖引流"},{value:8,label:"凯文抖音博主号"},{value:9,label:"七七团队素人账号"},{value:10,label:"不凡团队素人账号"},{value:4,label:"朋友介绍"},{value:5,label:"其他"}],{pager:O,getLists:$,resetPage:_e}=Gt({fetchFun:jt,params:i}),G=u([]),H=u([]),ve=u([]),W=u([]),Z=u(!1),ye=u(),ee=u(!1),ge=u(),te=u(!1),be=u(),le=u(!1),we=u(),oe=u(!1),ke=u(),se=u(!1),Ce=u(),ae=u(!1),Ve=u(),ne=u(!1),he=u(),Y=K(()=>{const t=R.userInfo||{};if(Number(t.root||0)===1)return!0;const m=t.role_id;return(Array.isArray(m)?m:m?[m]:[]).map(c=>Number(c)).some(c=>c===1||c===2)}),w=u(0),$e=u(0),xe=u(""),Ae=K(()=>Ht(["user.user/followStatus"])),Be=K(()=>{const t=R.userInfo||{};return Number(t.employee_user_id||t.user_id||0)}),z=u(!1),Ee=u(""),S=u(!1),j=u(!1),x=Te({customer_id:0,follow_status:0}),X=u(null),Ye=[{value:0,label:"暂不联系"},{value:1,label:"1天后联系"},{value:2,label:"2天后联系"},{value:3,label:"3天后联系"},{value:4,label:"5天后联系"},{value:5,label:"7天后联系"}],je=async()=>{try{const t=await Xt();G.value=t.stage_options||[],H.value=t.customer_type_options||[]}catch(t){console.error(t)}},Xe=async()=>{try{const t=await Jt(),e=[],m=(_,c="")=>{_.forEach(b=>{const L=`${c}${b.name}`;e.push({id:b.id,name:L}),b.children&&b.children.length&&m(b.children,`${c}— `)})};m(t||[]),ve.value=e}catch(t){console.error(t)}},qe=async()=>{try{const t=await Qt({page_no:1,page_size:500,status:1});W.value=(t==null?void 0:t.lists)||[]}catch(t){console.error(t)}},Ke=K(()=>{const t=Number(i.dept_id||0);return t?W.value.filter(e=>Number(e.dept_id||0)===t):W.value}),Je=t=>{const e=t.real_name||t.nickname||t.account||`ID:${t.id}`,m=t.mobile?` (${t.mobile})`:"";return`${e}${m}`},Qe=t=>t===6?"stage-text stage-success":t===5||t===51?"stage-text stage-warning":t===4?"stage-text stage-info":"stage-text",Pe=t=>t==="urgent"?"remind-urgent":t==="near"?"remind-near":t==="normal"?"remind-normal":"",Ge=t=>t===1?"男":t===2?"女":"未知",He=t=>{const e=t.last_follow_time_ts||0;if(!e)return"-";const m=Math.max(0,Math.floor(Date.now()/1e3)-e);return m<24*3600?`${Math.max(1,Math.floor(m/3600))}小时前`:m<48*3600?"昨天":t.last_follow_time||"-"},re=t=>Number(t.follow_status||0)>0?"可联系":"暂不联系",Re=t=>Number(t.follow_status||0)>0?"success":"info",We=t=>{const e=Number(t.follow_status||0);if(e<=0)return"暂不联系";const _={1:1,2:2,3:3,4:5,5:7}[e]||0,c=Number(t.last_follow_time_ts||0)||Math.floor(Date.now()/1e3),b=new Date((c+_*86400)*1e3),L=b.getFullYear(),F=String(b.getMonth()+1).padStart(2,"0"),A=String(b.getDate()).padStart(2,"0");return`建议联系日期：${L}-${F}-${A}`},Ze=t=>{const e=t.mobile||"",m=t.wechat||"",_=t.project_items_desc||"",c=re(t),b=t.remark||"";return`联系电话:${e};微信号:${m};报单项目:${_};跟进状态:${c};备注:${b}`},ie=t=>{const e=Be.value;return e?Number(t.transfer_from_employee_id||0)===e:!1},et=t=>{var e,m;return ie(t)?t.transfer_from_name||((e=R.userInfo)==null?void 0:e.name)||((m=R.userInfo)==null?void 0:m.account)||t.owner_name||"-":t.owner_name||"-"},tt=t=>{const e=t.transfer_to_name||"",m=t.transfer_to_employee_id?`ID:${t.transfer_to_employee_id}`:"";return`已转给业务员【${e||m||"-"}】`},Se=t=>Number(t.owner_employee_id||0)>0,lt=()=>{Z.value=!0,P(()=>{var t;(t=ye.value)==null||t.open()})},ot=t=>{w.value=t.customer_id||t.id,xe.value=t.relation_type||"",ee.value=!0,P(()=>{var e;(e=ge.value)==null||e.open("follow")})},st=t=>{w.value=t.customer_id||t.id,le.value=!0,P(()=>{var e;(e=we.value)==null||e.open()})},at=t=>{w.value=t.customer_id||t.id,oe.value=!0,P(()=>{var e;(e=ke.value)==null||e.open()})},nt=t=>{w.value=t.customer_id||t.id,$e.value=Number(t.owner_employee_id||0),se.value=!0,P(()=>{var e;(e=Ce.value)==null||e.open()})},rt=t=>{w.value=t.customer_id||t.id,ae.value=!0,P(()=>{var e;(e=Ve.value)==null||e.open()})},it=t=>{w.value=t.customer_id||t.id,te.value=!0,P(()=>{var e;(e=be.value)==null||e.open("all")})},ut=t=>{w.value=t.customer_id||t.id,ne.value=!0,P(()=>{var e;(e=he.value)==null||e.open()})},dt=()=>{I.value=[],T.value=[],N.value=[],Object.assign(i,{start_time:"",end_time:"",dept_id:"",owner_uid:"",source:"",stage:"",customer_type:"",mobile:"",wechat:"",customer_name:"",unfollow_start:"",unfollow_end:"",pending_start:"",pending_end:"",today_pending:0,today_follow:0,assist_only:0}),_e()},mt=async t=>{var e,m,_;await zt.confirm("确定抢单跟进该客户吗？","提示",{type:"warning"});try{await qt({customer_id:t.customer_id||t.id}),q.success("抢单成功"),t.can_claim=0,t.can_follow=1;const c=Number(((e=R.userInfo)==null?void 0:e.user_id)||0);c>0&&(t.owner_employee_id=c),(!t.owner_name||t.owner_name==="未跟进")&&(t.owner_name=((m=R.userInfo)==null?void 0:m.name)||((_=R.userInfo)==null?void 0:_.account)||t.owner_name),await $()}catch(c){q.error(c.msg||"抢单失败")}},pt=t=>{X.value=t,x.customer_id=t.customer_id||t.id,x.follow_status=Number(t.follow_status||0),S.value=!0},ct=t=>{t.next_follow_time&&(Ee.value=t.next_follow_time,z.value=!0)},Le=()=>{X.value=null,x.customer_id=0,x.follow_status=0,j.value=!1},ft=async()=>{if(x.customer_id){j.value=!0;try{await Kt({customer_id:x.customer_id,follow_status:x.follow_status}),X.value&&(X.value.follow_status=x.follow_status),q.success("操作成功"),S.value=!1,Le()}catch(t){q.error(t.msg||"操作失败"),j.value=!1}}},ue=t=>{if(!Q||!V)return;const e=t.pageX-ce;V.scrollLeft=fe-e},de=()=>{V&&(Q=!1,V.classList.remove("is-dragging"),window.removeEventListener("mousemove",ue),window.removeEventListener("mouseup",de))},De=t=>{!V||t.button!==0||(Q=!0,ce=t.pageX,fe=V.scrollLeft,V.classList.add("is-dragging"),window.addEventListener("mousemove",ue),window.addEventListener("mouseup",de))},_t=()=>{var t;J.value&&(V=((t=J.value.$el)==null?void 0:t.querySelector(".el-scrollbar__wrap"))||null,V&&V.addEventListener("mousedown",De))};return il(()=>{$()}),je(),Xe(),qe(),$(),B(()=>Y.value,t=>{t||(i.dept_id="",i.owner_uid="")}),B(()=>I.value,t=>{i.start_time=(t==null?void 0:t[0])||"",i.end_time=(t==null?void 0:t[1])||""}),B(()=>T.value,t=>{i.unfollow_start=(t==null?void 0:t[0])||"",i.unfollow_end=(t==null?void 0:t[1])||""}),B(()=>N.value,t=>{i.pending_start=(t==null?void 0:t[0])||"",i.pending_end=(t==null?void 0:t[1])||""}),B(()=>i.dept_id,()=>{i.owner_uid=""}),ul(()=>{P(()=>{_t()})}),dl(()=>{V&&V.removeEventListener("mousedown",De),window.removeEventListener("mousemove",ue),window.removeEventListener("mouseup",de)}),(t,e)=>{const m=Vt,_=$t,c=ht,b=xt,L=Ct,F=Et,A=Rt,f=Pt,Me=St,v=Dt,vt=Mt,Ue=Ut,yt=It,gt=Lt,bt=Ft,wt=Nt,Ie=Ot,E=Ne("perms"),me=Ne("copy"),kt=Tt;return r(),k("div",null,[a(Me,{class:"!border-none",shadow:"never"},{default:s(()=>[n("div",ml,[e[46]||(e[46]=n("div",{class:"advanced-title"},"高级查询",-1)),a(L,{ref_key:"formRef",ref:ze,model:o(i),class:"advanced-grid"},{default:s(()=>[n("div",pl,[e[28]||(e[28]=n("div",{class:"search-label"},"日期范围",-1)),a(m,{modelValue:o(I),"onUpdate:modelValue":e[0]||(e[0]=l=>D(I)?I.value=l:null),type:"daterange","range-separator":"到","start-placeholder":"开始","end-placeholder":"结束","value-format":"YYYY-MM-DD",class:"search-control"},null,8,["modelValue"])]),o(Y)?(r(),k("div",cl,[e[29]||(e[29]=n("div",{class:"search-label"},"部门",-1)),a(c,{modelValue:o(i).dept_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o(i).dept_id=l),placeholder:"选择部门",clearable:"",class:"search-control"},{default:s(()=>[(r(!0),k(M,null,U(o(ve),l=>(r(),d(_,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])):g("",!0),o(Y)?(r(),k("div",fl,[e[30]||(e[30]=n("div",{class:"search-label"},"跟进人",-1)),a(c,{modelValue:o(i).owner_uid,"onUpdate:modelValue":e[2]||(e[2]=l=>o(i).owner_uid=l),placeholder:"选择跟进人",clearable:"",class:"search-control"},{default:s(()=>[(r(!0),k(M,null,U(o(Ke),l=>(r(),d(_,{key:l.id,label:Je(l),value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])):g("",!0),n("div",_l,[e[31]||(e[31]=n("div",{class:"search-label"},"客户来源",-1)),a(c,{modelValue:o(i).source,"onUpdate:modelValue":e[3]||(e[3]=l=>o(i).source=l),placeholder:"客户来源",clearable:"",class:"search-control"},{default:s(()=>[(r(),k(M,null,U(Fe,l=>a(_,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",vl,[e[32]||(e[32]=n("div",{class:"search-label"},"客户阶段",-1)),a(c,{modelValue:o(i).stage,"onUpdate:modelValue":e[4]||(e[4]=l=>o(i).stage=l),placeholder:"请选择",clearable:"",class:"search-control"},{default:s(()=>[(r(!0),k(M,null,U(o(G),l=>(r(),d(_,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",yl,[e[33]||(e[33]=n("div",{class:"search-label"},"客户类型",-1)),a(c,{modelValue:o(i).customer_type,"onUpdate:modelValue":e[5]||(e[5]=l=>o(i).customer_type=l),placeholder:"请选择",clearable:"",class:"search-control"},{default:s(()=>[(r(!0),k(M,null,U(o(H),l=>(r(),d(_,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",gl,[e[34]||(e[34]=n("div",{class:"search-label"},"手机号",-1)),a(b,{modelValue:o(i).mobile,"onUpdate:modelValue":e[6]||(e[6]=l=>o(i).mobile=l),placeholder:"请输入手机号码",class:"search-control",clearable:""},null,8,["modelValue"])]),n("div",bl,[e[35]||(e[35]=n("div",{class:"search-label"},"微信号",-1)),a(b,{modelValue:o(i).wechat,"onUpdate:modelValue":e[7]||(e[7]=l=>o(i).wechat=l),placeholder:"请输入微信号",class:"search-control",clearable:""},null,8,["modelValue"])]),n("div",wl,[e[36]||(e[36]=n("div",{class:"search-label"},"客户名称",-1)),a(b,{modelValue:o(i).customer_name,"onUpdate:modelValue":e[8]||(e[8]=l=>o(i).customer_name=l),placeholder:"请输入客户名称",class:"search-control",clearable:""},null,8,["modelValue"])]),n("div",kl,[e[37]||(e[37]=n("div",{class:"search-label"},"未跟进客户",-1)),a(m,{modelValue:o(T),"onUpdate:modelValue":e[9]||(e[9]=l=>D(T)?T.value=l:null),type:"daterange","range-separator":"到","start-placeholder":"开始","end-placeholder":"结束","value-format":"YYYY-MM-DD",class:"search-control"},null,8,["modelValue"])]),n("div",Cl,[e[38]||(e[38]=n("div",{class:"search-label"},"待跟进客户",-1)),a(m,{modelValue:o(N),"onUpdate:modelValue":e[10]||(e[10]=l=>D(N)?N.value=l:null),type:"daterange","range-separator":"到","start-placeholder":"开始","end-placeholder":"结束","value-format":"YYYY-MM-DD",class:"search-control"},null,8,["modelValue"])]),e[39]||(e[39]=n("div",{class:"search-spacer"},null,-1))]),_:1},8,["model"]),n("div",Vl,[n("div",hl,[e[43]||(e[43]=n("div",{class:"search-label"},"选项",-1)),n("div",$l,[a(F,{modelValue:o(i).today_pending,"onUpdate:modelValue":e[11]||(e[11]=l=>o(i).today_pending=l),"true-label":1,"false-label":0},{default:s(()=>e[40]||(e[40]=[p(" 今日待跟进 ")])),_:1},8,["modelValue"]),a(F,{modelValue:o(i).today_follow,"onUpdate:modelValue":e[12]||(e[12]=l=>o(i).today_follow=l),"true-label":1,"false-label":0},{default:s(()=>e[41]||(e[41]=[p(" 今日已跟进 ")])),_:1},8,["modelValue"]),a(F,{modelValue:o(i).assist_only,"onUpdate:modelValue":e[13]||(e[13]=l=>o(i).assist_only=l),"true-label":1,"false-label":0},{default:s(()=>e[42]||(e[42]=[p(" 协助的客户 ")])),_:1},8,["modelValue"])])]),n("div",xl,[a(f,{onClick:dt},{default:s(()=>[a(A,null,{default:s(()=>[a(o(At))]),_:1}),e[44]||(e[44]=p(" 清空 "))]),_:1}),a(f,{type:"primary",onClick:o(_e)},{default:s(()=>[a(A,null,{default:s(()=>[a(o(Bt))]),_:1}),e[45]||(e[45]=p(" 查询数据 "))]),_:1},8,["onClick"])])])])]),_:1}),a(Me,{class:"!border-none mt-4",shadow:"never"},{default:s(()=>[n("div",El,[C((r(),d(f,{type:"primary",onClick:lt},{default:s(()=>e[47]||(e[47]=[p(" 客户报备 ")])),_:1})),[[E,["user.user/add"]]])]),C((r(),d(gt,{ref_key:"tableRef",ref:J,class:"table-drag-scroll",size:"large",data:o(O).lists},{default:s(()=>[a(v,{label:"报单时间",prop:"create_time","min-width":"140"}),a(v,{label:"报备人",prop:"report_admin_name","min-width":"100"}),a(v,{label:"客户信息","min-width":"260"},{default:s(({row:l})=>[n("div",Pl,[a(vt,{size:48,src:l.avatar,class:"mr-2"},null,8,["src"]),n("div",Rl,[n("div",Sl,y(l.real_name||l.nickname||"-"),1),n("div",Ll,[p(" 微信："+y(l.wechat||"-")+" ",1),l.wechat?C((r(),d(f,{key:0,type:"primary",plain:"",size:"small",class:"tiny-copy"},{default:s(()=>e[48]||(e[48]=[p(" 复制 ")])),_:2},1024)),[[me,l.wechat]]):g("",!0)]),n("div",Dl,[p(" 手机："+y(l.mobile||"-")+" ",1),l.mobile?C((r(),d(f,{key:0,type:"primary",plain:"",size:"small",class:"tiny-copy"},{default:s(()=>e[49]||(e[49]=[p(" 复制 ")])),_:2},1024)),[[me,l.mobile]]):g("",!0)]),n("div",Ml,"性别："+y(Ge(l.sex)),1),n("div",Ul,"地区："+y(l.region||"-"),1)])])]),_:1}),a(v,{label:"来源","min-width":"140"},{default:s(({row:l})=>[n("div",Il,[n("div",null,"来源："+y(l.source_desc||"-"),1),n("div",null,"来源账号："+y(l.source_account||"-"),1)])]),_:1}),a(v,{label:"客户类型",prop:"customer_type_desc","min-width":"90"}),a(v,{label:"主跟进人","min-width":"120"},{default:s(({row:l})=>[n("div",Tl,[n("span",null,y(et(l)),1),ie(l)?(r(),d(Ue,{key:0,content:tt(l)},{default:s(()=>e[50]||(e[50]=[n("span",{class:"owner-transfer"},"（转）",-1)])),_:2},1032,["content"])):g("",!0)])]),_:1}),a(v,{label:"协助员","min-width":"120"},{default:s(({row:l})=>{var h;return[p(y(((h=l.assist_names)==null?void 0:h.join(", "))||"-"),1)]}),_:1}),a(v,{label:"平台咨询",prop:"blogger_name","min-width":"100"}),a(v,{label:"提醒","min-width":"70"},{default:s(({row:l})=>[l.next_follow_time?(r(),d(A,{key:0,class:pe(["remind-icon",Pe(l.remind_status)]),onClick:h=>ct(l)},{default:s(()=>[a(o(Yt))]),_:2},1032,["class","onClick"])):(r(),k("span",Nl,"-"))]),_:1}),a(v,{label:"客户阶段","min-width":"90"},{default:s(({row:l})=>[Se(l)?(r(),k("span",{key:0,class:pe(Qe(l.stage))},y(l.stage_desc),3)):(r(),k("span",Ol,"-"))]),_:1}),a(v,{label:"报单项目",prop:"project_items_desc","min-width":"140","show-overflow-tooltip":""}),a(v,{label:"所在群聊","min-width":"120"},{default:s(({row:l})=>[l.group_chat?(r(),k("span",zl,y(l.group_chat),1)):(r(),k("span",Fl,"-"))]),_:1}),a(v,{label:"所推咨询",prop:"hospital","min-width":"140","show-overflow-tooltip":""},{default:s(({row:l})=>[p(y(l.hospital||"-"),1)]),_:1}),a(v,{label:"下次跟进时间","min-width":"140"},{default:s(({row:l})=>[n("span",{class:pe(Pe(l.remind_status))},y(l.next_follow_time||"-"),3)]),_:1}),a(v,{label:"最后跟进时间","min-width":"140"},{default:s(({row:l})=>[p(y(He(l)),1)]),_:1}),a(v,{label:"能否联系","min-width":"140"},{default:s(({row:l})=>[a(Ue,{content:We(l),placement:"top"},{default:s(()=>[o(Ae)?(r(),d(f,{key:0,type:Re(l),plain:"",size:"small",onClick:h=>pt(l)},{default:s(()=>[p(y(re(l)),1)]),_:2},1032,["type","onClick"])):(r(),d(yt,{key:1,type:Re(l)},{default:s(()=>[p(y(re(l)),1)]),_:2},1032,["type"]))]),_:2},1032,["content"])]),_:1}),a(v,{label:"操作",width:"360",fixed:"right"},{default:s(({row:l})=>[n("div",Al,[l.can_follow&&(!o(Y)||Se(l))?C((r(),d(f,{key:0,type:"warning",plain:"",size:"small",class:"btn-follow",onClick:h=>ot(l)},{default:s(()=>e[51]||(e[51]=[p(" 跟进 ")])),_:2},1032,["onClick"])),[[E,["user.user/followAdd"]]]):g("",!0),l.can_claim?C((r(),d(f,{key:1,type:"warning",plain:"",size:"small",onClick:h=>mt(l)},{default:s(()=>e[52]||(e[52]=[p(" 抢单 ")])),_:2},1032,["onClick"])),[[E,["user.user/claim"]]]):g("",!0),l.owner_employee_id===0?C((r(),d(f,{key:2,type:"primary",plain:"",size:"small",onClick:h=>st(l)},{default:s(()=>e[53]||(e[53]=[p(" 分配跟进人 ")])),_:2},1032,["onClick"])),[[E,["user.user/assign"]]]):C((r(),d(f,{key:3,type:"primary",plain:"",size:"small",onClick:h=>at(l)},{default:s(()=>e[54]||(e[54]=[p(" 转移 ")])),_:2},1032,["onClick"])),[[E,["user.user/transfer"]]]),C((r(),d(f,{type:"primary",plain:"",size:"small",onClick:h=>nt(l)},{default:s(()=>e[55]||(e[55]=[p(" 指派协助员 ")])),_:2},1032,["onClick"])),[[E,["user.user/addAssist"]]]),ie(l)?g("",!0):C((r(),d(f,{key:4,type:"primary",plain:"",size:"small",onClick:h=>rt(l)},{default:s(()=>e[56]||(e[56]=[p(" 对接咨询 ")])),_:2},1032,["onClick"])),[[E,["user.user/assignBlogger"]]]),C((r(),d(f,{type:"primary",plain:"",size:"small"},{default:s(()=>e[57]||(e[57]=[p(" 复制 ")])),_:2},1024)),[[me,Ze(l)]]),C((r(),d(f,{type:"primary",plain:"",size:"small",onClick:h=>ut(l)},{default:s(()=>e[58]||(e[58]=[p(" 完善信息 ")])),_:2},1032,["onClick"])),[[E,["user.user/edit"]]]),C((r(),d(f,{type:"primary",plain:"",size:"small",onClick:h=>it(l)},{default:s(()=>e[59]||(e[59]=[p(" 查看跟进记录 ")])),_:2},1032,["onClick"])),[[E,["user.user/detail"]]])])]),_:1})]),_:1},8,["data"])),[[kt,o(O).loading]]),n("div",Bl,[a(bt,{modelValue:o(O),"onUpdate:modelValue":e[14]||(e[14]=l=>D(O)?O.value=l:null),onChange:o($)},null,8,["modelValue","onChange"])])]),_:1}),o(Z)?(r(),d(el,{key:0,ref_key:"reportPopupRef",ref:ye,onSuccess:o($),onClose:e[15]||(e[15]=l=>Z.value=!1)},null,8,["onSuccess"])):g("",!0),o(ee)?(r(),d(tl,{key:1,ref_key:"followPopupRef",ref:ge,"customer-id":o(w),"relation-type":o(xe),"stage-options":o(G),"customer-type-options":o(H),onSuccess:o($),onClose:e[16]||(e[16]=l=>ee.value=!1)},null,8,["customer-id","relation-type","stage-options","customer-type-options","onSuccess"])):g("",!0),o(le)?(r(),d(ol,{key:2,ref_key:"assignPopupRef",ref:we,"customer-id":o(w),onSuccess:o($),onClose:e[17]||(e[17]=l=>le.value=!1)},null,8,["customer-id","onSuccess"])):g("",!0),o(oe)?(r(),d(sl,{key:3,ref_key:"transferPopupRef",ref:ke,"customer-id":o(w),onSuccess:o($),onClose:e[18]||(e[18]=l=>oe.value=!1)},null,8,["customer-id","onSuccess"])):g("",!0),o(se)?(r(),d(al,{key:4,ref_key:"assistPopupRef",ref:Ce,"customer-id":o(w),"owner-employee-id":o($e),onSuccess:o($),onClose:e[19]||(e[19]=l=>se.value=!1)},null,8,["customer-id","owner-employee-id","onSuccess"])):g("",!0),o(ae)?(r(),d(nl,{key:5,ref_key:"assignBloggerPopupRef",ref:Ve,"customer-id":o(w),onSuccess:o($),onClose:e[20]||(e[20]=l=>ae.value=!1)},null,8,["customer-id","onSuccess"])):g("",!0),o(te)?(r(),d(ll,{key:6,ref_key:"followLogPopupRef",ref:be,"customer-id":o(w),onClose:e[21]||(e[21]=l=>te.value=!1)},null,8,["customer-id"])):g("",!0),o(ne)?(r(),d(rl,{key:7,ref_key:"editPopupRef",ref:he,"customer-id":o(w),onSuccess:o($),onClose:e[22]||(e[22]=l=>ne.value=!1)},null,8,["customer-id","onSuccess"])):g("",!0),a(Ie,{modelValue:o(S),"onUpdate:modelValue":e[25]||(e[25]=l=>D(S)?S.value=l:null),title:"联系状态",width:"420px",onClose:Le},{footer:s(()=>[a(f,{onClick:e[24]||(e[24]=l=>S.value=!1)},{default:s(()=>e[60]||(e[60]=[p("取消")])),_:1}),a(f,{type:"primary",loading:o(j),onClick:ft},{default:s(()=>e[61]||(e[61]=[p("确定")])),_:1},8,["loading"])]),default:s(()=>[a(L,{model:o(x),"label-width":"90px"},{default:s(()=>[a(wt,{label:"联系状态"},{default:s(()=>[a(c,{modelValue:o(x).follow_status,"onUpdate:modelValue":e[23]||(e[23]=l=>o(x).follow_status=l),class:"w-full"},{default:s(()=>[(r(),k(M,null,U(Ye,l=>a(_,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(Ie,{modelValue:o(z),"onUpdate:modelValue":e[27]||(e[27]=l=>D(z)?z.value=l:null),title:"下次跟进提醒",width:"360px"},{footer:s(()=>[a(f,{type:"primary",onClick:e[26]||(e[26]=l=>z.value=!1)},{default:s(()=>e[62]||(e[62]=[p("确定")])),_:1})]),default:s(()=>[n("div",Yl," 下次跟进时间："+y(o(Ee)||"-"),1)]),_:1},8,["modelValue"])])}}}),Ho=Zt(Xl,[["__scopeId","data-v-2cf33190"]]);export{Ho as default};
