import{D as N,B as j,O as z,P as K,i as q,I as A,L as G,M as H,R as J,K as Q,S as W}from"./element-plus-Dexv8m38.js";import{u as X}from"./usePaging-B2jDzebD.js";import{i as Y,j as Z}from"./report-Dk0xVeLs.js";import{g as ee}from"./employee-CJ8eLApb.js";import{_ as te}from"./index.vue_vue_type_script_setup_true_lang-D_09Ie3h.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-k5looPxV.js";import{d as U,a0 as oe,r as c,l as ae,c as v,o as s,U as t,L as o,u as a,T as x,ab as D,K as b,R as m,M as $,a as re,S as y,i as B}from"./@vue-ygbFPFRc.js";import"./@element-plus-X4lX9UBP.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./index-RwF53efZ.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";const ne={class:"flex justify-end mt-4"},ie=U({name:"reportTransfer"}),Ge=U({...ie,setup(se){const i=oe({from_uid:"",to_uid:"",start_time:"",end_time:""}),{pager:d,getLists:V,resetPage:I,resetParams:P}=X({fetchFun:Y,params:i}),g=c([]),R=async()=>{try{const r=await ee({page_no:1,page_size:500,status:""});g.value=(r==null?void 0:r.lists)||[]}catch(r){console.error(r)}},k=r=>{const e=r.real_name||r.nickname||r.account||`ID:${r.id}`,u=r.mobile?` (${r.mobile})`:"";return`${e}${u}`},p=c(!1),w=c(!1),E=c([]),F=async r=>{p.value=!0,w.value=!0;try{const e=await Z({batch_id:r.id,page_no:1,page_size:100});E.value=(e==null?void 0:e.lists)||[]}catch(e){console.error(e)}finally{w.value=!1}};return ae(()=>{V(),R()}),(r,e)=>{const u=K,T=z,_=j,f=q,O=N,C=A,n=H,S=J,h=G,M=W,L=Q;return s(),v("div",null,[t(C,{class:"!border-none",shadow:"never"},{default:o(()=>[t(O,{ref:"formRef",inline:!0,model:a(i),class:"mb-[-16px]"},{default:o(()=>[t(_,{label:"转出业务员"},{default:o(()=>[t(T,{modelValue:a(i).from_uid,"onUpdate:modelValue":e[0]||(e[0]=l=>a(i).from_uid=l),placeholder:"请选择",clearable:"",filterable:"",class:"w-[200px]"},{default:o(()=>[(s(!0),v(x,null,D(a(g),l=>(s(),b(u,{key:l.id,label:k(l),value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"接手业务员"},{default:o(()=>[t(T,{modelValue:a(i).to_uid,"onUpdate:modelValue":e[1]||(e[1]=l=>a(i).to_uid=l),placeholder:"请选择",clearable:"",filterable:"",class:"w-[200px]"},{default:o(()=>[(s(!0),v(x,null,D(a(g),l=>(s(),b(u,{key:l.id,label:k(l),value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(_,{label:"转移时间"},{default:o(()=>[t(le,{startTime:a(i).start_time,"onUpdate:startTime":e[2]||(e[2]=l=>a(i).start_time=l),endTime:a(i).end_time,"onUpdate:endTime":e[3]||(e[3]=l=>a(i).end_time=l)},null,8,["startTime","endTime"])]),_:1}),t(_,null,{default:o(()=>[t(f,{type:"primary",onClick:a(I)},{default:o(()=>e[7]||(e[7]=[m("查询")])),_:1},8,["onClick"]),t(f,{onClick:a(P)},{default:o(()=>e[8]||(e[8]=[m("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(C,{class:"mt-4 !border-none",shadow:"never"},{default:o(()=>[$((s(),b(h,{data:a(d).lists,border:""},{default:o(()=>[t(n,{label:"批次ID",prop:"id",width:"80"}),t(n,{label:"转出业务员","min-width":"120"},{default:o(({row:l})=>[m(y(l.from_user_name||"-"),1)]),_:1}),t(n,{label:"接手业务员","min-width":"120"},{default:o(({row:l})=>[m(y(l.to_user_name||"-"),1)]),_:1}),t(n,{label:"转移数量",prop:"total_count",width:"100",align:"center"},{default:o(({row:l})=>[t(S,{type:"primary"},{default:o(()=>[m(y(l.total_count),1)]),_:2},1024)]),_:1}),t(n,{label:"转移原因",prop:"reason","min-width":"150","show-overflow-tooltip":""}),t(n,{label:"操作人",prop:"operator_name",width:"120"}),t(n,{label:"转移时间",prop:"create_time",width:"170"}),t(n,{label:"操作",width:"100",fixed:"right"},{default:o(({row:l})=>[t(f,{type:"primary",link:"",onClick:me=>F(l)},{default:o(()=>e[9]||(e[9]=[m(" 查看明细 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[L,a(d).loading]]),re("div",ne,[t(te,{modelValue:a(d),"onUpdate:modelValue":e[4]||(e[4]=l=>B(d)?d.value=l:null),onChange:a(V)},null,8,["modelValue","onChange"])])]),_:1}),t(M,{modelValue:a(p),"onUpdate:modelValue":e[6]||(e[6]=l=>B(p)?p.value=l:null),title:"转移明细",width:"800px"},{footer:o(()=>[t(f,{onClick:e[5]||(e[5]=l=>p.value=!1)},{default:o(()=>e[10]||(e[10]=[m("关闭")])),_:1})]),default:o(()=>[$((s(),b(h,{data:a(E),border:""},{default:o(()=>[t(n,{label:"线索ID",prop:"report_id",width:"80"}),t(n,{label:"客户手机",prop:"mobile",width:"130"}),t(n,{label:"客户姓名",prop:"real_name","min-width":"100"}),t(n,{label:"当前阶段",prop:"stage_desc",width:"100"}),t(n,{label:"转移时间",prop:"create_time",width:"170"})]),_:1},8,["data"])),[[L,a(w)]])]),_:1},8,["modelValue"])])}}});export{Ge as default};
