import{_ as k}from"./index-CJH9EJYw.js";import{D as I,B as x,C as B,I as C,i as S}from"./element-plus-Dexv8m38.js";import{_ as D}from"./picker-B75jrQ9B.js";import{a as M,f as p,m as i,E as N}from"./index-RwF53efZ.js";import{d as c,r as R,a0 as f,c as q,o as F,U as e,L as l,u as t,a as n,R as L}from"./@vue-ygbFPFRc.js";import"./@element-plus-X4lX9UBP.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./index-CiZ7u30k.js";import"./index-CbsoMyLi.js";import"./index.vue_vue_type_script_setup_true_lang-D_09Ie3h.js";import"./index-B6RYlZU7.js";import"./index-DABXkeGo.js";import"./index.vue_vue_type_script_setup_true_lang-Dv5KHRgf.js";import"./@vueuse-yz9uDhpq.js";import"./usePaging-B2jDzebD.js";import"./vuedraggable-RHgmLr3o.js";import"./vue-CQyKTslw.js";import"./sortablejs-BvvSZPRv.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";const T={class:"user-setting"},j={class:"w-80"},z={class:"w-80"},A={class:"w-80"},G={class:"w-80"},H={class:"w-80"},J=c({name:"userSetting"}),Fo=c({...J,setup(K){const u=R(),_=M(),o=f({avatar:"",account:"",name:"",password_old:"",password:"",password_confirm:""}),w=f({avatar:[{required:!0,message:"头像不能为空",trigger:["change"]}],name:[{required:!0,message:"请输入名称",trigger:["blur"]}]}),g=async()=>{const s=_.userInfo;for(const r in o)o[r]=s[r]},V=async()=>{if(o.password_old||o.password||o.password_confirm){if(!o.password_old)return p.msgError("请输入当前密码");if(!o.password)return p.msgError("请输入新的密码");if(!o.password_confirm)return p.msgError("请输入确定密码");if(o.password_confirm!=o.password)return p.msgError("两次输入的密码不一样")}if(o.password_old&&o.password&&o.password_confirm){if(o.password_old.length<6||o.password_old.length>32)return p.msgError("密码长度在6到32之间");if(o.password.length<6||o.password.length>32)return p.msgError("密码长度在6到32之间");if(o.password_confirm.length<6||o.password_confirm.length>32)return p.msgError("密码长度在6到32之间")}const s={...o};s.password_old&&(s.password_old=i(s.password_old)),s.password&&(s.password=i(s.password)),s.password_confirm&&(s.password_confirm=i(s.password_confirm)),await N(s),_.getUserInfo()},b=async()=>{var s;await((s=u.value)==null?void 0:s.validate()),V()};return g(),(s,r)=>{const v=D,d=x,m=B,E=I,U=C,h=S,y=k;return F(),q("div",T,[e(U,{class:"!border-none",shadow:"never"},{default:l(()=>[e(E,{ref_key:"formRef",ref:u,class:"ls-form",model:t(o),rules:t(w),"label-width":"100px"},{default:l(()=>[e(d,{label:"头像：",prop:"avatar"},{default:l(()=>[e(v,{modelValue:t(o).avatar,"onUpdate:modelValue":r[0]||(r[0]=a=>t(o).avatar=a),limit:1},null,8,["modelValue"])]),_:1}),e(d,{label:"账号：",prop:"account"},{default:l(()=>[n("div",j,[e(m,{modelValue:t(o).account,"onUpdate:modelValue":r[1]||(r[1]=a=>t(o).account=a),disabled:""},null,8,["modelValue"])])]),_:1}),e(d,{label:"名称：",prop:"name"},{default:l(()=>[n("div",z,[e(m,{modelValue:t(o).name,"onUpdate:modelValue":r[2]||(r[2]=a=>t(o).name=a),placeholder:"请输入名称"},null,8,["modelValue"])])]),_:1}),e(d,{label:"当前密码：",prop:"password_old"},{default:l(()=>[n("div",A,[e(m,{modelValue:t(o).password_old,"onUpdate:modelValue":r[3]||(r[3]=a=>t(o).password_old=a),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1}),e(d,{label:"新的密码：",prop:"password"},{default:l(()=>[n("div",G,[e(m,{modelValue:t(o).password,"onUpdate:modelValue":r[4]||(r[4]=a=>t(o).password=a),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1}),e(d,{label:"确定密码：",prop:"password_confirm"},{default:l(()=>[n("div",H,[e(m,{modelValue:t(o).password_confirm,"onUpdate:modelValue":r[5]||(r[5]=a=>t(o).password_confirm=a),modelModifiers:{trim:!0},placeholder:"修改密码时必填, 不修改密码时留空",type:"password","show-password":""},null,8,["modelValue"])])]),_:1})]),_:1},8,["model","rules"])]),_:1}),e(y,null,{default:l(()=>[e(h,{type:"primary",onClick:b},{default:l(()=>r[6]||(r[6]=[L("保存")])),_:1})]),_:1})])}}});export{Fo as default};
