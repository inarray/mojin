import{D as gt,Q as bt,O as wt,P as kt,C as Vt,F as ht,i as Ct,d as xt,I as $t,L as Et,M as Pt,q as Rt,r as St,R as Lt,K as Dt,B as Mt,S as It,a as Ut,E as X}from"./element-plus-Dexv8m38.js";import{_ as Tt}from"./index.vue_vue_type_script_setup_true_lang-D_09Ie3h.js";import{I as Nt,J as Ot,K as Ft}from"./@element-plus-X4lX9UBP.js";import{g as At,a as zt,c as Bt,u as Yt}from"./consumer-B-5sexIM.js";import{d as jt}from"./department-Csnz69ah.js";import{g as Xt}from"./employee-CJ8eLApb.js";import{u as qt}from"./usePaging-B2jDzebD.js";import{h as Kt}from"./perm-BTE9ex1C.js";import{a as Jt,d as Qt}from"./index-RwF53efZ.js";import{_ as Gt}from"./report.vue_vue_type_script_setup_true_name_consumerReport_lang-nQ-CIE3k.js";import Ht from"./follow-popup-B11DM2t4.js";import Wt from"./follow-log-popup-Bt3e0Uw_.js";import{_ as Zt}from"./assign-popup.vue_vue_type_script_setup_true_lang-DEWeLF_i.js";import{_ as el}from"./transfer-popup.vue_vue_type_script_setup_true_lang-CSvaxHze.js";import{_ as tl}from"./assist-popup.vue_vue_type_script_setup_true_lang-BeRrudPv.js";import{_ as ll}from"./assign-blogger-popup.vue_vue_type_script_setup_true_lang-BE3vf3QI.js";import{d as Ie,r as i,a0 as De,b as q,a1 as ol,w as B,l as sl,n as R,$ as al,at as Me,c as b,o as r,U as s,K as m,P as w,L as a,a as n,u as o,i as D,T as M,ab as I,R as c,M as $,S as _,O as ue}from"./@vue-ygbFPFRc.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./index-CiZ7u30k.js";import"./project-CreSpfIK.js";import"./hospital-BeBKXzQO.js";import"./region-china-BCkRz1Fn.js";const nl={class:"advanced-search"},rl={class:"search-item"},ul={key:0,class:"search-item"},il={key:1,class:"search-item"},dl={class:"search-item"},ml={class:"search-item"},pl={class:"search-item"},cl={class:"search-item"},fl={class:"search-item"},_l={class:"search-item"},vl={class:"search-item"},yl={class:"search-item"},gl={class:"advanced-footer"},bl={class:"search-item search-options"},wl={class:"search-checks"},kl={class:"search-actions"},Vl={class:"flex items-center mb-4"},hl={class:"flex items-center"},Cl={class:"text-xs leading-5"},xl={class:"font-bold text-sm"},$l={class:"text-gray-500"},El={class:"text-gray-500 flex items-center gap-1"},Pl={class:"text-gray-500"},Rl={class:"text-gray-500"},Sl={class:"text-xs leading-5"},Ll={class:"owner-cell"},Dl={key:1},Ml={key:1},Il={key:0,class:"whitespace-pre-line"},Ul={key:1},Tl={class:"flex flex-wrap gap-1"},Nl={class:"flex justify-end mt-4"},Ol={class:"text-center remind-dialog-text text-gray-600"},Fl=Ie({name:"consumerDealLists"}),Al=Ie({...Fl,setup(zl){const K=i(),Ue=i();let k=null,J=!1,ie=0,de=0;const E=Jt(),u=De({start_time:"",end_time:"",dept_id:"",owner_uid:"",source:"",stage:6,customer_type:"",mobile:"",wechat:"",customer_name:"",unfollow_start:"",unfollow_end:"",pending_start:"",pending_end:"",today_pending:0,today_follow:0,assist_only:0}),U=i([]),T=i([]),N=i([]),Te=[{value:1,label:"小红书"},{value:2,label:"抖音"},{value:6,label:"快手"},{value:3,label:"微信"},{value:7,label:"发帖引流"},{value:8,label:"凯文抖音博主号"},{value:9,label:"七七团队素人账号"},{value:10,label:"不凡团队素人账号"},{value:4,label:"朋友介绍"},{value:5,label:"其他"}],{pager:O,getLists:C,resetPage:me}=qt({fetchFun:At,params:u}),Q=i([]),G=i([]),pe=i([]),H=i([]),W=i(!1),ce=i(),Z=i(!1),fe=i(),ee=i(!1),_e=i(),te=i(!1),ve=i(),le=i(!1),ye=i(),oe=i(!1),ge=i(),be=i(!1),Ne=i(),se=q(()=>{const t=E.userInfo||{};if(Number(t.root||0)===1)return!0;const d=t.role_id;return(Array.isArray(d)?d:d?[d]:[]).map(p=>Number(p)).some(p=>p===1||p===2)}),V=i(0),we=i(0),ke=i(""),Oe=q(()=>Kt(["user.user/followStatus"])),Fe=q(()=>{const t=E.userInfo||{};return Number(t.employee_user_id||t.user_id||0)}),F=i(!1),Ve=i(""),S=i(!1),Y=i(!1),h=De({customer_id:0,follow_status:0}),j=i(null),Ae=[{value:0,label:"暂不联系"},{value:1,label:"1天后联系"},{value:2,label:"2天后联系"},{value:3,label:"3天后联系"},{value:4,label:"5天后联系"},{value:5,label:"7天后联系"}],ze=async()=>{try{const t=await zt();Q.value=t.stage_options||[],G.value=t.customer_type_options||[]}catch(t){console.error(t)}},Be=async()=>{try{const t=await jt(),e=[],d=(f,p="")=>{f.forEach(y=>{const L=`${p}${y.name}`;e.push({id:y.id,name:L}),y.children&&y.children.length&&d(y.children,`${p}— `)})};d(t||[]),pe.value=e}catch(t){console.error(t)}},Ye=async()=>{try{const t=await Xt({page_no:1,page_size:500,status:1});H.value=(t==null?void 0:t.lists)||[]}catch(t){console.error(t)}},je=q(()=>{const t=Number(u.dept_id||0);return t?H.value.filter(e=>Number(e.dept_id||0)===t):H.value}),Xe=t=>{const e=t.real_name||t.nickname||t.account||`ID:${t.id}`,d=t.mobile?` (${t.mobile})`:"";return`${e}${d}`},qe=t=>t===6?"stage-text stage-success":t===5||t===51?"stage-text stage-warning":t===4?"stage-text stage-info":"stage-text",he=t=>t==="urgent"?"remind-urgent":t==="near"?"remind-near":t==="normal"?"remind-normal":"",Ke=t=>t===1?"男":t===2?"女":"未知",Je=t=>{const e=t.last_follow_time_ts||0;if(!e)return"-";const d=Math.max(0,Math.floor(Date.now()/1e3)-e);return d<24*3600?`${Math.max(1,Math.floor(d/3600))}小时前`:d<48*3600?"昨天":t.last_follow_time||"-"},ae=t=>Number(t.follow_status||0)>0?"可联系":"暂不联系",Ce=t=>Number(t.follow_status||0)>0?"success":"info",Qe=t=>{const e=Number(t.follow_status||0);if(e<=0)return"暂不联系";const f={1:1,2:2,3:3,4:5,5:7}[e]||0,p=Number(t.last_follow_time_ts||0)||Math.floor(Date.now()/1e3),y=new Date((p+f*86400)*1e3),L=y.getFullYear(),A=String(y.getMonth()+1).padStart(2,"0"),z=String(y.getDate()).padStart(2,"0");return`建议联系日期：${L}-${A}-${z}`},Ge=t=>{const e=t.mobile||"",d=t.wechat||"",f=t.project_items_desc||"",p=ae(t),y=t.remark||"";return`联系电话:${e};微信号:${d};报单项目:${f};跟进状态:${p};备注:${y}`},xe=t=>{const e=Fe.value;return e?Number(t.transfer_from_employee_id||0)===e:!1},He=t=>{var e,d;return xe(t)?t.transfer_from_name||((e=E.userInfo)==null?void 0:e.name)||((d=E.userInfo)==null?void 0:d.account)||t.owner_name||"-":t.owner_name||"-"},We=t=>{const e=t.transfer_to_name||"",d=t.transfer_to_employee_id?`ID:${t.transfer_to_employee_id}`:"";return`已转给业务员【${e||d||"-"}】`},Ze=t=>Number(t.owner_employee_id||0)>0,et=()=>{W.value=!0,R(()=>{var t;(t=ce.value)==null||t.open()})},tt=t=>{V.value=t.customer_id||t.id,ke.value=t.relation_type||"",Z.value=!0,R(()=>{var e;(e=fe.value)==null||e.open("follow")})},lt=t=>{V.value=t.customer_id||t.id,te.value=!0,R(()=>{var e;(e=ve.value)==null||e.open()})},ot=t=>{V.value=t.customer_id||t.id,le.value=!0,R(()=>{var e;(e=ye.value)==null||e.open()})},st=t=>{V.value=t.customer_id||t.id,we.value=Number(t.owner_employee_id||0),oe.value=!0,R(()=>{var e;(e=ge.value)==null||e.open()})},at=t=>{V.value=t.customer_id||t.id,ee.value=!0,R(()=>{var e;(e=_e.value)==null||e.open("all")})},nt=()=>{U.value=[],T.value=[],N.value=[],Object.assign(u,{start_time:"",end_time:"",dept_id:"",owner_uid:"",source:"",stage:6,customer_type:"",mobile:"",wechat:"",customer_name:"",unfollow_start:"",unfollow_end:"",pending_start:"",pending_end:"",today_pending:0,today_follow:0,assist_only:0}),me()},rt=async t=>{var e,d,f;await Ut.confirm("确定抢单跟进该客户吗？","提示",{type:"warning"});try{await Bt({customer_id:t.customer_id||t.id}),X.success("抢单成功"),t.can_claim=0,t.can_follow=1;const p=Number(((e=E.userInfo)==null?void 0:e.user_id)||0);p>0&&(t.owner_employee_id=p),(!t.owner_name||t.owner_name==="未跟进")&&(t.owner_name=((d=E.userInfo)==null?void 0:d.name)||((f=E.userInfo)==null?void 0:f.account)||t.owner_name),await C()}catch(p){X.error(p.msg||"抢单失败")}},ut=t=>{j.value=t,h.customer_id=t.customer_id||t.id,h.follow_status=Number(t.follow_status||0),S.value=!0},it=t=>{t.next_follow_time&&(Ve.value=t.next_follow_time,F.value=!0)},$e=()=>{j.value=null,h.customer_id=0,h.follow_status=0,Y.value=!1},dt=async()=>{if(h.customer_id){Y.value=!0;try{await Yt({customer_id:h.customer_id,follow_status:h.follow_status}),j.value&&(j.value.follow_status=h.follow_status),X.success("操作成功"),S.value=!1,$e()}catch(t){X.error(t.msg||"操作失败"),Y.value=!1}}},ne=t=>{if(!J||!k)return;const e=t.pageX-ie;k.scrollLeft=de-e},re=()=>{k&&(J=!1,k.classList.remove("is-dragging"),window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",re))},Ee=t=>{!k||t.button!==0||(J=!0,ie=t.pageX,de=k.scrollLeft,k.classList.add("is-dragging"),window.addEventListener("mousemove",ne),window.addEventListener("mouseup",re))},mt=()=>{var t;K.value&&(k=((t=K.value.$el)==null?void 0:t.querySelector(".el-scrollbar__wrap"))||null,k&&k.addEventListener("mousedown",Ee))};return ol(()=>{C()}),ze(),Be(),Ye(),C(),B(()=>se.value,t=>{t||(u.dept_id="",u.owner_uid="")}),B(()=>U.value,t=>{u.start_time=(t==null?void 0:t[0])||"",u.end_time=(t==null?void 0:t[1])||""}),B(()=>T.value,t=>{u.unfollow_start=(t==null?void 0:t[0])||"",u.unfollow_end=(t==null?void 0:t[1])||""}),B(()=>N.value,t=>{u.pending_start=(t==null?void 0:t[0])||"",u.pending_end=(t==null?void 0:t[1])||""}),B(()=>u.dept_id,()=>{u.owner_uid=""}),sl(()=>{R(()=>{mt()})}),al(()=>{k&&k.removeEventListener("mousedown",Ee),window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",re)}),(t,e)=>{const d=bt,f=kt,p=wt,y=Vt,L=gt,A=ht,z=xt,g=Ct,Pe=$t,v=Pt,pt=Rt,Re=St,ct=Lt,ft=Et,_t=Tt,vt=Mt,Se=It,P=Me("perms"),Le=Me("copy"),yt=Dt;return r(),b("div",null,[s(Pe,{class:"!border-none",shadow:"never"},{default:a(()=>[n("div",nl,[e[45]||(e[45]=n("div",{class:"advanced-title"},"高级查询",-1)),s(L,{ref_key:"formRef",ref:Ue,model:o(u),class:"advanced-grid"},{default:a(()=>[n("div",rl,[e[27]||(e[27]=n("div",{class:"search-label"},"日期范围",-1)),s(d,{modelValue:o(U),"onUpdate:modelValue":e[0]||(e[0]=l=>D(U)?U.value=l:null),type:"daterange","range-separator":"到","start-placeholder":"开始","end-placeholder":"结束","value-format":"YYYY-MM-DD",class:"search-control"},null,8,["modelValue"])]),o(se)?(r(),b("div",ul,[e[28]||(e[28]=n("div",{class:"search-label"},"部门",-1)),s(p,{modelValue:o(u).dept_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o(u).dept_id=l),placeholder:"选择部门",clearable:"",class:"search-control"},{default:a(()=>[(r(!0),b(M,null,I(o(pe),l=>(r(),m(f,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])):w("",!0),o(se)?(r(),b("div",il,[e[29]||(e[29]=n("div",{class:"search-label"},"跟进人",-1)),s(p,{modelValue:o(u).owner_uid,"onUpdate:modelValue":e[2]||(e[2]=l=>o(u).owner_uid=l),placeholder:"选择跟进人",clearable:"",class:"search-control"},{default:a(()=>[(r(!0),b(M,null,I(o(je),l=>(r(),m(f,{key:l.id,label:Xe(l),value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])):w("",!0),n("div",dl,[e[30]||(e[30]=n("div",{class:"search-label"},"客户来源",-1)),s(p,{modelValue:o(u).source,"onUpdate:modelValue":e[3]||(e[3]=l=>o(u).source=l),placeholder:"客户来源",clearable:"",class:"search-control"},{default:a(()=>[(r(),b(M,null,I(Te,l=>s(f,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),n("div",ml,[e[31]||(e[31]=n("div",{class:"search-label"},"客户阶段",-1)),s(p,{modelValue:o(u).stage,"onUpdate:modelValue":e[4]||(e[4]=l=>o(u).stage=l),placeholder:"请选择",clearable:"",class:"search-control"},{default:a(()=>[(r(!0),b(M,null,I(o(Q),l=>(r(),m(f,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",pl,[e[32]||(e[32]=n("div",{class:"search-label"},"客户类型",-1)),s(p,{modelValue:o(u).customer_type,"onUpdate:modelValue":e[5]||(e[5]=l=>o(u).customer_type=l),placeholder:"请选择",clearable:"",class:"search-control"},{default:a(()=>[(r(!0),b(M,null,I(o(G),l=>(r(),m(f,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",cl,[e[33]||(e[33]=n("div",{class:"search-label"},"手机号",-1)),s(y,{modelValue:o(u).mobile,"onUpdate:modelValue":e[6]||(e[6]=l=>o(u).mobile=l),placeholder:"请输入手机号码",class:"search-control",clearable:""},null,8,["modelValue"])]),n("div",fl,[e[34]||(e[34]=n("div",{class:"search-label"},"微信号",-1)),s(y,{modelValue:o(u).wechat,"onUpdate:modelValue":e[7]||(e[7]=l=>o(u).wechat=l),placeholder:"请输入微信号",class:"search-control",clearable:""},null,8,["modelValue"])]),n("div",_l,[e[35]||(e[35]=n("div",{class:"search-label"},"客户名称",-1)),s(y,{modelValue:o(u).customer_name,"onUpdate:modelValue":e[8]||(e[8]=l=>o(u).customer_name=l),placeholder:"请输入客户名称",class:"search-control",clearable:""},null,8,["modelValue"])]),n("div",vl,[e[36]||(e[36]=n("div",{class:"search-label"},"未跟进客户",-1)),s(d,{modelValue:o(T),"onUpdate:modelValue":e[9]||(e[9]=l=>D(T)?T.value=l:null),type:"daterange","range-separator":"到","start-placeholder":"开始","end-placeholder":"结束","value-format":"YYYY-MM-DD",class:"search-control"},null,8,["modelValue"])]),n("div",yl,[e[37]||(e[37]=n("div",{class:"search-label"},"待跟进客户",-1)),s(d,{modelValue:o(N),"onUpdate:modelValue":e[10]||(e[10]=l=>D(N)?N.value=l:null),type:"daterange","range-separator":"到","start-placeholder":"开始","end-placeholder":"结束","value-format":"YYYY-MM-DD",class:"search-control"},null,8,["modelValue"])]),e[38]||(e[38]=n("div",{class:"search-spacer"},null,-1))]),_:1},8,["model"]),n("div",gl,[n("div",bl,[e[42]||(e[42]=n("div",{class:"search-label"},"选项",-1)),n("div",wl,[s(A,{modelValue:o(u).today_pending,"onUpdate:modelValue":e[11]||(e[11]=l=>o(u).today_pending=l),"true-label":1,"false-label":0},{default:a(()=>e[39]||(e[39]=[c(" 今日待跟进 ")])),_:1},8,["modelValue"]),s(A,{modelValue:o(u).today_follow,"onUpdate:modelValue":e[12]||(e[12]=l=>o(u).today_follow=l),"true-label":1,"false-label":0},{default:a(()=>e[40]||(e[40]=[c(" 今日已跟进 ")])),_:1},8,["modelValue"]),s(A,{modelValue:o(u).assist_only,"onUpdate:modelValue":e[13]||(e[13]=l=>o(u).assist_only=l),"true-label":1,"false-label":0},{default:a(()=>e[41]||(e[41]=[c(" 协助的客户 ")])),_:1},8,["modelValue"])])]),n("div",kl,[s(g,{onClick:nt},{default:a(()=>[s(z,null,{default:a(()=>[s(o(Nt))]),_:1}),e[43]||(e[43]=c(" 清空 "))]),_:1}),s(g,{type:"primary",onClick:o(me)},{default:a(()=>[s(z,null,{default:a(()=>[s(o(Ot))]),_:1}),e[44]||(e[44]=c(" 查询数据 "))]),_:1},8,["onClick"])])])])]),_:1}),s(Pe,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[n("div",Vl,[$((r(),m(g,{type:"primary",onClick:et},{default:a(()=>e[46]||(e[46]=[c(" 客户报备 ")])),_:1})),[[P,["user.user/add"]]])]),$((r(),m(ft,{ref_key:"tableRef",ref:K,class:"table-drag-scroll",size:"large",data:o(O).lists},{default:a(()=>[s(v,{label:"报单时间",prop:"create_time","min-width":"140"}),s(v,{label:"客户信息","min-width":"260"},{default:a(({row:l})=>[n("div",hl,[s(pt,{size:48,src:l.avatar,class:"mr-2"},null,8,["src"]),n("div",Cl,[n("div",xl,_(l.real_name||l.nickname||"-"),1),n("div",$l,"微信："+_(l.wechat||"-"),1),n("div",El,[c(" 手机："+_(l.mobile||"-")+" ",1),l.mobile?$((r(),m(g,{key:0,type:"primary",plain:"",size:"small"},{default:a(()=>e[47]||(e[47]=[c(" 复制 ")])),_:2},1024)),[[Le,l.mobile]]):w("",!0)]),n("div",Pl,"性别："+_(Ke(l.sex)),1),n("div",Rl,"地区："+_(l.region||"-"),1)])])]),_:1}),s(v,{label:"来源","min-width":"140"},{default:a(({row:l})=>[n("div",Sl,[n("div",null,"来源："+_(l.source_desc||"-"),1),n("div",null,"来源账号："+_(l.source_account||"-"),1)])]),_:1}),s(v,{label:"客户类型",prop:"customer_type_desc","min-width":"90"}),s(v,{label:"主跟进人","min-width":"120"},{default:a(({row:l})=>[n("div",Ll,[n("span",null,_(He(l)),1),xe(l)?(r(),m(Re,{key:0,content:We(l)},{default:a(()=>e[48]||(e[48]=[n("span",{class:"owner-transfer"},"（转）",-1)])),_:2},1032,["content"])):w("",!0)])]),_:1}),s(v,{label:"协助员","min-width":"120"},{default:a(({row:l})=>{var x;return[c(_(((x=l.assist_names)==null?void 0:x.join(", "))||"-"),1)]}),_:1}),s(v,{label:"平台咨询",prop:"blogger_name","min-width":"100"}),s(v,{label:"提醒","min-width":"70"},{default:a(({row:l})=>[l.next_follow_time?(r(),m(z,{key:0,class:ue(["remind-icon",he(l.remind_status)]),onClick:x=>it(l)},{default:a(()=>[s(o(Ft))]),_:2},1032,["class","onClick"])):(r(),b("span",Dl,"-"))]),_:1}),s(v,{label:"客户阶段","min-width":"90"},{default:a(({row:l})=>[Ze(l)?(r(),b("span",{key:0,class:ue(qe(l.stage))},_(l.stage_desc),3)):(r(),b("span",Ml,"-"))]),_:1}),s(v,{label:"报单项目",prop:"project_items_desc","min-width":"140","show-overflow-tooltip":""}),s(v,{label:"所在群聊","min-width":"120"},{default:a(({row:l})=>[l.group_chat?(r(),b("span",Il,_(l.group_chat),1)):(r(),b("span",Ul,"-"))]),_:1}),s(v,{label:"所推咨询",prop:"hospital","min-width":"140","show-overflow-tooltip":""},{default:a(({row:l})=>[c(_(l.hospital||"-"),1)]),_:1}),s(v,{label:"下次跟进时间","min-width":"140"},{default:a(({row:l})=>[n("span",{class:ue(he(l.remind_status))},_(l.next_follow_time||"-"),3)]),_:1}),s(v,{label:"最后跟进时间","min-width":"140"},{default:a(({row:l})=>[c(_(Je(l)),1)]),_:1}),s(v,{label:"能否联系","min-width":"140"},{default:a(({row:l})=>[s(Re,{content:Qe(l),placement:"top"},{default:a(()=>[o(Oe)?(r(),m(g,{key:0,type:Ce(l),plain:"",size:"small",onClick:x=>ut(l)},{default:a(()=>[c(_(ae(l)),1)]),_:2},1032,["type","onClick"])):(r(),m(ct,{key:1,type:Ce(l)},{default:a(()=>[c(_(ae(l)),1)]),_:2},1032,["type"]))]),_:2},1032,["content"])]),_:1}),s(v,{label:"操作",width:"360",fixed:"right"},{default:a(({row:l})=>[n("div",Tl,[l.can_follow?$((r(),m(g,{key:0,type:"warning",plain:"",size:"small",class:"btn-follow",onClick:x=>tt(l)},{default:a(()=>e[49]||(e[49]=[c(" 跟进 ")])),_:2},1032,["onClick"])),[[P,["user.user/followAdd"]]]):w("",!0),l.can_claim?$((r(),m(g,{key:1,type:"warning",plain:"",size:"small",onClick:x=>rt(l)},{default:a(()=>e[50]||(e[50]=[c(" 抢单 ")])),_:2},1032,["onClick"])),[[P,["user.user/claim"]]]):w("",!0),l.owner_employee_id===0?$((r(),m(g,{key:2,type:"primary",plain:"",size:"small",onClick:x=>lt(l)},{default:a(()=>e[51]||(e[51]=[c(" 分配 ")])),_:2},1032,["onClick"])),[[P,["user.user/assign"]]]):$((r(),m(g,{key:3,type:"primary",plain:"",size:"small",onClick:x=>ot(l)},{default:a(()=>e[52]||(e[52]=[c(" 转移 ")])),_:2},1032,["onClick"])),[[P,["user.user/transfer"]]]),$((r(),m(g,{type:"primary",plain:"",size:"small",onClick:x=>st(l)},{default:a(()=>e[53]||(e[53]=[c(" 指派协助员 ")])),_:2},1032,["onClick"])),[[P,["user.user/addAssist"]]]),$((r(),m(g,{type:"primary",plain:"",size:"small"},{default:a(()=>e[54]||(e[54]=[c(" 复制 ")])),_:2},1024)),[[Le,Ge(l)]]),$((r(),m(g,{type:"primary",plain:"",size:"small",onClick:x=>at(l)},{default:a(()=>e[55]||(e[55]=[c(" 查看跟进记录 ")])),_:2},1032,["onClick"])),[[P,["user.user/detail"]]])])]),_:1})]),_:1},8,["data"])),[[yt,o(O).loading]]),n("div",Nl,[s(_t,{modelValue:o(O),"onUpdate:modelValue":e[14]||(e[14]=l=>D(O)?O.value=l:null),onChange:o(C)},null,8,["modelValue","onChange"])])]),_:1}),o(W)?(r(),m(Gt,{key:0,ref_key:"reportPopupRef",ref:ce,onSuccess:o(C),onClose:e[15]||(e[15]=l=>W.value=!1)},null,8,["onSuccess"])):w("",!0),o(Z)?(r(),m(Ht,{key:1,ref_key:"followPopupRef",ref:fe,"customer-id":o(V),"relation-type":o(ke),"stage-options":o(Q),"customer-type-options":o(G),onSuccess:o(C),onClose:e[16]||(e[16]=l=>Z.value=!1)},null,8,["customer-id","relation-type","stage-options","customer-type-options","onSuccess"])):w("",!0),o(te)?(r(),m(Zt,{key:2,ref_key:"assignPopupRef",ref:ve,"customer-id":o(V),onSuccess:o(C),onClose:e[17]||(e[17]=l=>te.value=!1)},null,8,["customer-id","onSuccess"])):w("",!0),o(le)?(r(),m(el,{key:3,ref_key:"transferPopupRef",ref:ye,"customer-id":o(V),onSuccess:o(C),onClose:e[18]||(e[18]=l=>le.value=!1)},null,8,["customer-id","onSuccess"])):w("",!0),o(oe)?(r(),m(tl,{key:4,ref_key:"assistPopupRef",ref:ge,"customer-id":o(V),"owner-employee-id":o(we),onSuccess:o(C),onClose:e[19]||(e[19]=l=>oe.value=!1)},null,8,["customer-id","owner-employee-id","onSuccess"])):w("",!0),o(be)?(r(),m(ll,{key:5,ref_key:"assignBloggerPopupRef",ref:Ne,"customer-id":o(V),onSuccess:o(C),onClose:e[20]||(e[20]=l=>be.value=!1)},null,8,["customer-id","onSuccess"])):w("",!0),o(ee)?(r(),m(Wt,{key:6,ref_key:"followLogPopupRef",ref:_e,"customer-id":o(V),onClose:e[21]||(e[21]=l=>ee.value=!1)},null,8,["customer-id"])):w("",!0),s(Se,{modelValue:o(S),"onUpdate:modelValue":e[24]||(e[24]=l=>D(S)?S.value=l:null),title:"联系状态",width:"420px",onClose:$e},{footer:a(()=>[s(g,{onClick:e[23]||(e[23]=l=>S.value=!1)},{default:a(()=>e[56]||(e[56]=[c("取消")])),_:1}),s(g,{type:"primary",loading:o(Y),onClick:dt},{default:a(()=>e[57]||(e[57]=[c("确定")])),_:1},8,["loading"])]),default:a(()=>[s(L,{model:o(h),"label-width":"90px"},{default:a(()=>[s(vt,{label:"联系状态"},{default:a(()=>[s(p,{modelValue:o(h).follow_status,"onUpdate:modelValue":e[22]||(e[22]=l=>o(h).follow_status=l),class:"w-full"},{default:a(()=>[(r(),b(M,null,I(Ae,l=>s(f,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),s(Se,{modelValue:o(F),"onUpdate:modelValue":e[26]||(e[26]=l=>D(F)?F.value=l:null),title:"下次跟进提醒",width:"360px"},{footer:a(()=>[s(g,{type:"primary",onClick:e[25]||(e[25]=l=>F.value=!1)},{default:a(()=>e[58]||(e[58]=[c("确定")])),_:1})]),default:a(()=>[n("div",Ol," 下次跟进时间："+_(o(Ve)||"-"),1)]),_:1},8,["modelValue"])])}}}),No=Qt(Al,[["__scopeId","data-v-e6f259d9"]]);export{No as default};
