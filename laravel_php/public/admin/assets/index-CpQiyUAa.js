import{D as O,B as q,C as z,O as G,P as H,i as J,I as Q,d as W,L as X,M as Y,g as Z,K as ee,a as te,E as k}from"./element-plus-Dexv8m38.js";import{_ as oe}from"./index.vue_vue_type_script_setup_true_lang-D_09Ie3h.js";import{A as ae}from"./@element-plus-X4lX9UBP.js";import{d as le,e as se,f as ne}from"./project-CreSpfIK.js";import{u as ie}from"./usePaging-B2jDzebD.js";import{h as re}from"./perm-BTE9ex1C.js";import{_ as me}from"./edit.vue_vue_type_script_setup_true_name_hospitalProjectEdit_lang-PKAqjNtV.js";import{d as j,a0 as pe,r as y,b as de,l as ce,at as ue,c as E,o as n,U as t,K as m,P as _e,L as o,u as a,R as c,a as V,M as h,S as fe,i as he,n as x}from"./@vue-ygbFPFRc.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./index-RwF53efZ.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./index-CiZ7u30k.js";const ve={class:"flex justify-between mb-4"},we={key:1},be={class:"flex justify-end mt-4"},ge=j({name:"hospitalProject"}),st=j({...ge,setup(Ce){const i=pe({name:"",is_show:""}),u=y(!1),v=y(),S=de(()=>re(["hospital.project/status"])),{pager:p,getLists:_,resetPage:P,resetParams:B}=ie({fetchFun:le,params:i}),D=()=>{u.value=!0,x(()=>{var s;(s=v.value)==null||s.open("add")})},U=s=>{u.value=!0,x(()=>{var e;(e=v.value)==null||e.open("edit",s.id)})},$=async s=>{await te.confirm("确定删除该项目？已被引用的项目无法删除","删除确认",{type:"warning"}),await se({id:s.id}),k.success("删除成功"),_()},I=async s=>{try{await ne({id:s.id,is_show:s.is_show}),k.success("操作成功")}catch{s.is_show=s.is_show===1?0:1}};return ce(()=>{_()}),(s,e)=>{const L=z,w=q,g=H,M=G,d=J,R=O,C=Q,N=W,r=Y,T=Z,F=X,A=oe,b=ue("perms"),K=ee;return n(),E("div",null,[t(C,{class:"!border-none",shadow:"never"},{default:o(()=>[t(R,{ref:"formRef",model:a(i),inline:!0},{default:o(()=>[t(w,{label:"项目名称"},{default:o(()=>[t(L,{modelValue:a(i).name,"onUpdate:modelValue":e[0]||(e[0]=l=>a(i).name=l),placeholder:"请输入项目名称",clearable:"",class:"w-[200px]"},null,8,["modelValue"])]),_:1}),t(w,{label:"状态"},{default:o(()=>[t(M,{modelValue:a(i).is_show,"onUpdate:modelValue":e[1]||(e[1]=l=>a(i).is_show=l),placeholder:"全部",clearable:"",class:"w-[120px]"},{default:o(()=>[t(g,{label:"启用",value:1}),t(g,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1}),t(w,null,{default:o(()=>[t(d,{type:"primary",onClick:a(P)},{default:o(()=>e[4]||(e[4]=[c("查询")])),_:1},8,["onClick"]),t(d,{onClick:a(B)},{default:o(()=>e[5]||(e[5]=[c("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(C,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[V("div",ve,[h((n(),m(d,{type:"primary",onClick:D},{default:o(()=>[t(N,{class:"mr-1"},{default:o(()=>[t(a(ae))]),_:1}),e[6]||(e[6]=c(" 添加项目 "))]),_:1})),[[b,["hospital.project/add"]]])]),h((n(),m(F,{size:"large",data:a(p).lists},{default:o(()=>[t(r,{label:"ID",prop:"id",width:"80"}),t(r,{label:"项目名称",prop:"name","min-width":"150"}),t(r,{label:"排序",prop:"sort",width:"100"}),t(r,{label:"状态","min-width":"100"},{default:o(({row:l})=>[a(S)?(n(),m(T,{key:0,modelValue:l.is_show,"onUpdate:modelValue":f=>l.is_show=f,"active-value":1,"inactive-value":0,onChange:f=>I(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(n(),E("span",we,fe(l.is_show===1?"启用":"禁用"),1))]),_:1}),t(r,{label:"创建时间",prop:"create_time","min-width":"170"}),t(r,{label:"操作",width:"150",fixed:"right"},{default:o(({row:l})=>[h((n(),m(d,{type:"primary",link:"",onClick:f=>U(l)},{default:o(()=>e[7]||(e[7]=[c(" 编辑 ")])),_:2},1032,["onClick"])),[[b,["hospital.project/edit"]]]),h((n(),m(d,{type:"danger",link:"",onClick:f=>$(l)},{default:o(()=>e[8]||(e[8]=[c(" 删除 ")])),_:2},1032,["onClick"])),[[b,["hospital.project/delete"]]])]),_:1})]),_:1},8,["data"])),[[K,a(p).loading]]),V("div",be,[t(A,{modelValue:a(p),"onUpdate:modelValue":e[2]||(e[2]=l=>he(p)?p.value=l:null),onChange:a(_)},null,8,["modelValue","onChange"])])]),_:1}),a(u)?(n(),m(me,{key:0,ref_key:"editRef",ref:v,onSuccess:a(_),onClose:e[3]||(e[3]=l=>u.value=!1)},null,8,["onSuccess"])):_e("",!0)])}}});export{st as default};
