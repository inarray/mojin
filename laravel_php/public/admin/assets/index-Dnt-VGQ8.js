import{D as G,B as H,C as J,O as Q,P as W,i as X,I as Y,d as Z,L as ee,M as te,g as oe,K as ae,a as le,E as w}from"./element-plus-Dexv8m38.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang-D_09Ie3h.js";import{A as se}from"./@element-plus-X4lX9UBP.js";import{d as V,_ as ie,a as re,b as de}from"./edit.vue_vue_type_script_setup_true_name_hospitalDoctorEdit_lang-CfRiulSe.js";import{u as pe}from"./usePaging-B2jDzebD.js";import{h as me}from"./perm-BTE9ex1C.js";import{d as B,a0 as ce,r as y,b as ue,l as _e,at as fe,c as x,o as s,U as t,K as d,P as ve,L as o,u as a,R as c,a as j,M as v,S as be,i as ge,n as D}from"./@vue-ygbFPFRc.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./index-RwF53efZ.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./index-CiZ7u30k.js";const he={class:"flex justify-between mb-4"},ye={key:1},Ce={class:"flex justify-end mt-4"},ke=B({name:"hospitalDoctor"}),st=B({...ke,setup(Ee){const r=ce({name:"",is_featured:""}),u=y(!1),b=y(),C=y([]),P=ue(()=>me(["hospital.doctor/featured"])),{pager:p,getLists:_,resetPage:F,resetParams:S}=pe({fetchFun:V,params:r}),U=async()=>{var l;try{const e=await V({page_no:1,page_size:1});(l=e==null?void 0:e.extend)!=null&&l.project_options&&(C.value=e.extend.project_options)}catch(e){console.error(e)}},$=()=>{u.value=!0,D(()=>{var l;(l=b.value)==null||l.open("add")})},I=l=>{u.value=!0,D(()=>{var e;(e=b.value)==null||e.open("edit",l.id)})},L=async l=>{await le.confirm("确定删除该医生？","删除确认",{type:"warning"}),await re({id:l.id}),w.success("删除成功"),_()},M=async l=>{try{await de({id:l.id,is_featured:l.is_featured}),w.success("操作成功")}catch{l.is_featured=l.is_featured===1?0:1}};return _e(()=>{U(),_()}),(l,e)=>{const R=J,g=H,k=W,N=Q,m=X,T=G,E=Y,O=Z,i=te,z=oe,A=ee,K=ne,h=fe("perms"),q=ae;return s(),x("div",null,[t(E,{class:"!border-none",shadow:"never"},{default:o(()=>[t(T,{ref:"formRef",model:a(r),inline:!0},{default:o(()=>[t(g,{label:"医生名称"},{default:o(()=>[t(R,{modelValue:a(r).name,"onUpdate:modelValue":e[0]||(e[0]=n=>a(r).name=n),placeholder:"请输入医生名称",clearable:"",class:"w-[200px]"},null,8,["modelValue"])]),_:1}),t(g,{label:"是否主推"},{default:o(()=>[t(N,{modelValue:a(r).is_featured,"onUpdate:modelValue":e[1]||(e[1]=n=>a(r).is_featured=n),placeholder:"全部",clearable:"",class:"w-[120px]"},{default:o(()=>[t(k,{label:"是",value:1}),t(k,{label:"否",value:0})]),_:1},8,["modelValue"])]),_:1}),t(g,null,{default:o(()=>[t(m,{type:"primary",onClick:a(F)},{default:o(()=>e[4]||(e[4]=[c("查询")])),_:1},8,["onClick"]),t(m,{onClick:a(S)},{default:o(()=>e[5]||(e[5]=[c("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(E,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[j("div",he,[v((s(),d(m,{type:"primary",onClick:$},{default:o(()=>[t(O,{class:"mr-1"},{default:o(()=>[t(a(se))]),_:1}),e[6]||(e[6]=c(" 添加医生 "))]),_:1})),[[h,["hospital.doctor/add"]]])]),v((s(),d(A,{size:"large",data:a(p).lists},{default:o(()=>[t(i,{label:"ID",prop:"id",width:"80"}),t(i,{label:"医生名称",prop:"name","min-width":"120"}),t(i,{label:"擅长项目",prop:"project_names","min-width":"200","show-overflow-tooltip":""}),t(i,{label:"是否主推","min-width":"100"},{default:o(({row:n})=>[a(P)?(s(),d(z,{key:0,modelValue:n.is_featured,"onUpdate:modelValue":f=>n.is_featured=f,"active-value":1,"inactive-value":0,onChange:f=>M(n)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(s(),x("span",ye,be(n.is_featured===1?"是":"否"),1))]),_:1}),t(i,{label:"排序",prop:"sort",width:"80"}),t(i,{label:"创建时间",prop:"create_time","min-width":"170"}),t(i,{label:"操作",width:"150",fixed:"right"},{default:o(({row:n})=>[v((s(),d(m,{type:"primary",link:"",onClick:f=>I(n)},{default:o(()=>e[7]||(e[7]=[c(" 编辑 ")])),_:2},1032,["onClick"])),[[h,["hospital.doctor/edit"]]]),v((s(),d(m,{type:"danger",link:"",onClick:f=>L(n)},{default:o(()=>e[8]||(e[8]=[c(" 删除 ")])),_:2},1032,["onClick"])),[[h,["hospital.doctor/delete"]]])]),_:1})]),_:1},8,["data"])),[[q,a(p).loading]]),j("div",Ce,[t(K,{modelValue:a(p),"onUpdate:modelValue":e[2]||(e[2]=n=>ge(p)?p.value=n:null),onChange:a(_)},null,8,["modelValue","onChange"])])]),_:1}),a(u)?(s(),d(ie,{key:0,ref_key:"editRef",ref:b,"project-options":a(C),onSuccess:a(_),onClose:e[3]||(e[3]=n=>u.value=!1)},null,8,["project-options","onSuccess"])):ve("",!0)])}}});export{st as default};
