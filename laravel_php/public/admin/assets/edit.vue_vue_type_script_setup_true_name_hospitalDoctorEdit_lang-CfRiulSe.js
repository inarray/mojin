import{D as R,B as O,C as I,O as L,P as N,g as P,h as S}from"./element-plus-Dexv8m38.js";import{r as u}from"./index-RwF53efZ.js";import{P as q}from"./index-CiZ7u30k.js";import{d as v,r as c,b as T,a0 as A,K as b,o as f,u as r,L as n,U as s,c as K,T as z,ab as G,a as H}from"./@vue-ygbFPFRc.js";function ee(l){return u.get({url:"/hospital.doctor/lists",params:l})}function J(l){return u.get({url:"/hospital.doctor/detail",params:l})}function M(l){return u.post({url:"/hospital.doctor/add",params:l})}function Q(l){return u.post({url:"/hospital.doctor/edit",params:l})}function te(l){return u.post({url:"/hospital.doctor/delete",params:l})}function oe(l){return u.post({url:"/hospital.doctor/featured",params:l})}const W=v({name:"hospitalDoctorEdit"}),le=v({...W,props:{projectOptions:{}},emits:["success","close"],setup(l,{expose:w,emit:h}){const _=h,p=c(),V=c(),m=c("add"),E=T(()=>m.value==="add"?"添加医生":"编辑医生"),e=A({id:0,name:"",project_ids:[],is_featured:0,intro:"",sort:0}),g={name:[{required:!0,message:"请输入医生名称",trigger:"blur"}]},j=()=>{e.id=0,e.name="",e.project_ids=[],e.is_featured=0,e.intro="",e.sort=0},x=async(d,t)=>{var i;if(m.value=d,j(),(i=p.value)==null||i.open(),d==="edit"&&t){const a=await J({id:t});e.id=a.id,e.name=a.name,e.project_ids=a.project_ids||[],e.is_featured=a.is_featured,e.intro=a.intro||"",e.sort=a.sort}},k=async()=>{var d,t;await((d=V.value)==null?void 0:d.validate()),m.value==="edit"?await Q(e):await M(e),(t=p.value)==null||t.close(),_("success")},y=()=>{_("close")};return w({open:x}),(d,t)=>{const i=I,a=O,C=N,U=L,B=P,D=S,F=R;return f(),b(q,{ref_key:"popupRef",ref:p,title:r(E),async:!0,width:"600px",onConfirm:k,onClose:y},{default:n(()=>[s(F,{ref_key:"formRef",ref:V,model:r(e),rules:g,"label-width":"100px"},{default:n(()=>[s(a,{label:"医生名称",prop:"name"},{default:n(()=>[s(i,{modelValue:r(e).name,"onUpdate:modelValue":t[0]||(t[0]=o=>r(e).name=o),placeholder:"请输入医生名称",maxlength:"50"},null,8,["modelValue"])]),_:1}),s(a,{label:"擅长项目",prop:"project_ids"},{default:n(()=>[s(U,{modelValue:r(e).project_ids,"onUpdate:modelValue":t[1]||(t[1]=o=>r(e).project_ids=o),multiple:"",placeholder:"请选择擅长项目",class:"w-full"},{default:n(()=>[(f(!0),K(z,null,G(d.projectOptions,o=>(f(),b(C,{key:o.id,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(a,{label:"是否主推",prop:"is_featured"},{default:n(()=>[s(B,{modelValue:r(e).is_featured,"onUpdate:modelValue":t[2]||(t[2]=o=>r(e).is_featured=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),s(a,{label:"医生介绍",prop:"intro"},{default:n(()=>[s(i,{modelValue:r(e).intro,"onUpdate:modelValue":t[3]||(t[3]=o=>r(e).intro=o),type:"textarea",rows:4,placeholder:"请输入医生介绍",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),s(a,{label:"排序",prop:"sort"},{default:n(()=>[s(D,{modelValue:r(e).sort,"onUpdate:modelValue":t[4]||(t[4]=o=>r(e).sort=o),min:0,max:9999},null,8,["modelValue"]),t[5]||(t[5]=H("div",{class:"form-tips"},"数值越大越靠前",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])}}});export{le as _,te as a,oe as b,ee as d};
