import{D as A,B as K,O as q,P as G,i as H,I as J,d as Q,L as W,M as X,v as Y,g as Z,K as ee,a as te,E as C}from"./element-plus-Dexv8m38.js";import{_ as oe}from"./index.vue_vue_type_script_setup_true_lang-D_09Ie3h.js";import{A as le}from"./@element-plus-X4lX9UBP.js";import{b as E,_ as ae,a as ne,c as se}from"./edit.vue_vue_type_script_setup_true_name_contentBannerEdit_lang-zS5mgZdX.js";import{u as ie}from"./usePaging-B2jDzebD.js";import{d as L,a0 as re,r as b,l as pe,c as V,o as d,U as t,K as g,P as me,L as l,u as n,T as de,ab as ue,R as u,a as x,M as ce,i as _e,n as B}from"./@vue-ygbFPFRc.js";import"./lodash-es-C1lm3Iro.js";import"./dayjs-Bnps4p3p.js";import"./@popperjs-D_chPuIy.js";import"./async-validator-9PlIezaS.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./picker-B75jrQ9B.js";import"./index-CiZ7u30k.js";import"./index-RwF53efZ.js";import"./nprogress-UhqZPtFR.js";import"./vue-router-Cg6aTb_d.js";import"./pinia-CfRoOCaL.js";import"./axios-DIsA03vz.js";import"./lodash-CMKdTQec.js";import"./@vueuse-yz9uDhpq.js";import"./css-color-function-rr4n3v1N.js";import"./balanced-match-BdS7OldZ.js";import"./color-DYO1E7y4.js";import"./clone-Ddk2tjDh.js";import"./color-convert-DsNsD289.js";import"./color-name-Dju3oUBS.js";import"./color-string-pUQDDJII.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BWi338pc.js";import"./clipboard-7pJsftR6.js";import"./echarts-CXZcVnUo.js";import"./tslib-BDyQ-Jie.js";import"./zrender-DO4NV0px.js";import"./highlight.js-BLB-XFKK.js";import"./@highlightjs-DS9t1Xn3.js";import"./index-CbsoMyLi.js";import"./index-B6RYlZU7.js";import"./index-DABXkeGo.js";import"./index.vue_vue_type_script_setup_true_lang-Dv5KHRgf.js";import"./vuedraggable-RHgmLr3o.js";import"./vue-CQyKTslw.js";import"./sortablejs-BvvSZPRv.js";const fe={class:"flex justify-between mb-4"},ve={class:"flex justify-end mt-4"},we=L({name:"contentBanner"}),rt=L({...we,setup(be){const r=re({type:"",is_show:""}),c=b(!1),f=b(),h=b({1:"案例页",2:"百科页",3:"价格反馈页"}),{pager:p,getLists:_,resetPage:P,resetParams:S}=ie({fetchFun:E,params:r}),U=async()=>{var a;try{const e=await E({page_no:1,page_size:1});(a=e==null?void 0:e.extend)!=null&&a.type_options&&(h.value=e.extend.type_options)}catch(e){console.error(e)}},$=()=>{c.value=!0,B(()=>{var a;(a=f.value)==null||a.open("add")})},D=a=>{c.value=!0,B(()=>{var e;(e=f.value)==null||e.open("edit",a.id)})},I=async a=>{await te.confirm("确定删除该轮播图？","删除确认",{type:"warning"}),await ne({id:a.id}),C.success("删除成功"),_()},M=async a=>{try{await se({id:a.id,is_show:a.is_show}),C.success("操作成功")}catch{a.is_show=a.is_show===1?0:1}};return pe(()=>{U(),_()}),(a,e)=>{const v=G,y=q,w=K,m=H,N=A,k=J,R=Q,s=X,T=Y,F=Z,O=W,j=oe,z=ee;return d(),V("div",null,[t(k,{class:"!border-none",shadow:"never"},{default:l(()=>[t(N,{ref:"formRef",model:n(r),inline:!0},{default:l(()=>[t(w,{label:"页面类型"},{default:l(()=>[t(y,{modelValue:n(r).type,"onUpdate:modelValue":e[0]||(e[0]=o=>n(r).type=o),placeholder:"全部",clearable:"",class:"w-[180px]"},{default:l(()=>[(d(!0),V(de,null,ue(n(h),(o,i)=>(d(),g(v,{key:i,label:o,value:Number(i)},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(w,{label:"显示状态"},{default:l(()=>[t(y,{modelValue:n(r).is_show,"onUpdate:modelValue":e[1]||(e[1]=o=>n(r).is_show=o),placeholder:"全部",clearable:"",class:"w-[120px]"},{default:l(()=>[t(v,{label:"显示",value:1}),t(v,{label:"隐藏",value:0})]),_:1},8,["modelValue"])]),_:1}),t(w,null,{default:l(()=>[t(m,{type:"primary",onClick:n(P)},{default:l(()=>e[4]||(e[4]=[u("查询")])),_:1},8,["onClick"]),t(m,{onClick:n(S)},{default:l(()=>e[5]||(e[5]=[u("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(k,{class:"!border-none mt-4",shadow:"never"},{default:l(()=>[x("div",fe,[t(m,{type:"primary",onClick:$},{default:l(()=>[t(R,{class:"mr-1"},{default:l(()=>[t(n(le))]),_:1}),e[6]||(e[6]=u(" 添加轮播图 "))]),_:1})]),ce((d(),g(O,{size:"large",data:n(p).lists},{default:l(()=>[t(s,{label:"ID",prop:"id",width:"80"}),t(s,{label:"图片","min-width":"150"},{default:l(({row:o})=>[t(T,{src:o.image,"preview-src-list":[o.image],"preview-teleported":"",fit:"cover",class:"w-[100px] h-[50px] rounded"},null,8,["src","preview-src-list"])]),_:1}),t(s,{label:"标题",prop:"title","min-width":"150","show-overflow-tooltip":""}),t(s,{label:"页面类型",prop:"type_desc","min-width":"100"}),t(s,{label:"跳转类型",prop:"link_type_desc","min-width":"100"}),t(s,{label:"排序",prop:"sort",width:"80"}),t(s,{label:"状态","min-width":"80"},{default:l(({row:o})=>[t(F,{modelValue:o.is_show,"onUpdate:modelValue":i=>o.is_show=i,"active-value":1,"inactive-value":0,onChange:i=>M(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),t(s,{label:"创建时间",prop:"create_time","min-width":"160"}),t(s,{label:"操作",width:"150",fixed:"right"},{default:l(({row:o})=>[t(m,{type:"primary",link:"",onClick:i=>D(o)},{default:l(()=>e[7]||(e[7]=[u("编辑")])),_:2},1032,["onClick"]),t(m,{type:"danger",link:"",onClick:i=>I(o)},{default:l(()=>e[8]||(e[8]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[z,n(p).loading]]),x("div",ve,[t(j,{modelValue:n(p),"onUpdate:modelValue":e[2]||(e[2]=o=>_e(p)?p.value=o:null),onChange:n(_)},null,8,["modelValue","onChange"])])]),_:1}),n(c)?(d(),g(ae,{key:0,ref_key:"editRef",ref:f,onSuccess:n(_),onClose:e[3]||(e[3]=o=>c.value=!1)},null,8,["onSuccess"])):me("",!0)])}}});export{rt as default};
